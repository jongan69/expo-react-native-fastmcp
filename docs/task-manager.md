TaskManager - Expo Documentation

[Docs](/)

[Blog](https://expo.dev/blog)[Changelog](https://expo.dev/changelog)[Star Us on GitHub](https://github.com/expo/expo)

Search

[Home](/)[Guides](/guides/overview)[EAS](/eas)[Reference](/versions/latest)[Learn](/tutorial/overview)

Reference version

Configuration files

[app.json / app.config.js](/versions/v53.0.0/config/app)[babel.config.js](/versions/v53.0.0/config/babel)[metro.config.js](/versions/v53.0.0/config/metro)[package.json](/versions/v53.0.0/config/package-json)

Expo SDK

[Expo](/versions/v53.0.0/sdk/expo)[Accelerometer](/versions/v53.0.0/sdk/accelerometer)[AppleAuthentication](/versions/v53.0.0/sdk/apple-authentication)[Application](/versions/v53.0.0/sdk/application)[Asset](/versions/v53.0.0/sdk/asset)[Audio (expo-audio)](/versions/v53.0.0/sdk/audio)[Audio (expo-av)](/versions/v53.0.0/sdk/audio-av)[AuthSession](/versions/v53.0.0/sdk/auth-session)[AV](/versions/v53.0.0/sdk/av)[BackgroundFetch](/versions/v53.0.0/sdk/background-fetch)[BackgroundTask

NEW](/versions/v53.0.0/sdk/background-task)[Barometer](/versions/v53.0.0/sdk/barometer)[Battery](/versions/v53.0.0/sdk/battery)[BlurView](/versions/v53.0.0/sdk/blur-view)[Brightness](/versions/v53.0.0/sdk/brightness)[BuildProperties](/versions/v53.0.0/sdk/build-properties)[Calendar](/versions/v53.0.0/sdk/calendar)[Camera](/versions/v53.0.0/sdk/camera)[Cellular](/versions/v53.0.0/sdk/cellular)[Checkbox](/versions/v53.0.0/sdk/checkbox)[Clipboard](/versions/v53.0.0/sdk/clipboard)[Constants](/versions/v53.0.0/sdk/constants)[Contacts](/versions/v53.0.0/sdk/contacts)[Crypto](/versions/v53.0.0/sdk/crypto)[DevClient](/versions/v53.0.0/sdk/dev-client)[Device](/versions/v53.0.0/sdk/device)[DeviceMotion](/versions/v53.0.0/sdk/devicemotion)[DocumentPicker](/versions/v53.0.0/sdk/document-picker)[FileSystem](/versions/v53.0.0/sdk/filesystem)[FileSystem (next)](/versions/v53.0.0/sdk/filesystem-next)[Fingerprint

NEW](/versions/v53.0.0/sdk/fingerprint)[Font](/versions/v53.0.0/sdk/font)[GLView](/versions/v53.0.0/sdk/gl-view)[Gyroscope](/versions/v53.0.0/sdk/gyroscope)[Haptics](/versions/v53.0.0/sdk/haptics)[Image](/versions/v53.0.0/sdk/image)[ImageManipulator](/versions/v53.0.0/sdk/imagemanipulator)[ImagePicker](/versions/v53.0.0/sdk/imagepicker)[IntentLauncher](/versions/v53.0.0/sdk/intent-launcher)[KeepAwake](/versions/v53.0.0/sdk/keep-awake)[LightSensor](/versions/v53.0.0/sdk/light-sensor)[LinearGradient](/versions/v53.0.0/sdk/linear-gradient)[Linking](/versions/v53.0.0/sdk/linking)[LivePhoto](/versions/v53.0.0/sdk/live-photo)[LocalAuthentication](/versions/v53.0.0/sdk/local-authentication)[Localization](/versions/v53.0.0/sdk/localization)[Location](/versions/v53.0.0/sdk/location)[Magnetometer](/versions/v53.0.0/sdk/magnetometer)[MailComposer](/versions/v53.0.0/sdk/mail-composer)[Manifests](/versions/v53.0.0/sdk/manifests)[Maps

ALPHA](/versions/v53.0.0/sdk/maps)[MediaLibrary](/versions/v53.0.0/sdk/media-library)[MeshGradient

NEW](/versions/v53.0.0/sdk/mesh-gradient)[NavigationBar](/versions/v53.0.0/sdk/navigation-bar)[Network](/versions/v53.0.0/sdk/network)[Notifications](/versions/v53.0.0/sdk/notifications)[Pedometer](/versions/v53.0.0/sdk/pedometer)[Print](/versions/v53.0.0/sdk/print)[Router](/versions/v53.0.0/sdk/router)[Router UI](/versions/v53.0.0/sdk/router-ui)[ScreenCapture](/versions/v53.0.0/sdk/screen-capture)[ScreenOrientation](/versions/v53.0.0/sdk/screen-orientation)[SecureStore](/versions/v53.0.0/sdk/securestore)[Sensors](/versions/v53.0.0/sdk/sensors)[Sharing](/versions/v53.0.0/sdk/sharing)[SMS](/versions/v53.0.0/sdk/sms)[Speech](/versions/v53.0.0/sdk/speech)[SplashScreen](/versions/v53.0.0/sdk/splash-screen)[SQLite](/versions/v53.0.0/sdk/sqlite)[StatusBar](/versions/v53.0.0/sdk/status-bar)[StoreReview](/versions/v53.0.0/sdk/storereview)[Symbols](/versions/v53.0.0/sdk/symbols)[SystemUI](/versions/v53.0.0/sdk/system-ui)[TaskManager](/versions/v53.0.0/sdk/task-manager)[TrackingTransparency](/versions/v53.0.0/sdk/tracking-transparency)[UI

ALPHA](/versions/v53.0.0/sdk/ui)[Updates](/versions/v53.0.0/sdk/updates)[Video (expo-av)](/versions/v53.0.0/sdk/video-av)[Video (expo-video)](/versions/v53.0.0/sdk/video)[VideoThumbnails](/versions/v53.0.0/sdk/video-thumbnails)[WebBrowser](/versions/v53.0.0/sdk/webbrowser)

Third-party libraries

[Overview](/versions/v53.0.0/sdk/third-party-overview)[@react-native-async-storage/async-storage](/versions/v53.0.0/sdk/async-storage)[@react-native-community/datetimepicker](/versions/v53.0.0/sdk/date-time-picker)[@react-native-community/netinfo](/versions/v53.0.0/sdk/netinfo)[@react-native-community/slider](/versions/v53.0.0/sdk/slider)[@react-native-masked-view/masked-view](/versions/v53.0.0/sdk/masked-view)[@react-native-picker/picker](/versions/v53.0.0/sdk/picker)[@react-native-segmented-control/segmented-control](/versions/v53.0.0/sdk/segmented-control)[@shopify/flash-list](/versions/v53.0.0/sdk/flash-list)[@shopify/react-native-skia](/versions/v53.0.0/sdk/skia)[@stripe/stripe-react-native](/versions/v53.0.0/sdk/stripe)[lottie-react-native](/versions/v53.0.0/sdk/lottie)[react-native-gesture-handler](/versions/v53.0.0/sdk/gesture-handler)[react-native-maps](/versions/v53.0.0/sdk/map-view)[react-native-pager-view](/versions/v53.0.0/sdk/view-pager)[react-native-reanimated](/versions/v53.0.0/sdk/reanimated)[react-native-safe-area-context](/versions/v53.0.0/sdk/safe-area-context)[react-native-screens](/versions/v53.0.0/sdk/screens)[react-native-svg](/versions/v53.0.0/sdk/svg)[react-native-view-shot](/versions/v53.0.0/sdk/captureRef)[react-native-webview](/versions/v53.0.0/sdk/webview)

Technical specs

[Expo Updates v1](/technical-specs/expo-updates-1)[Expo Structured Field Values](/technical-specs/expo-sfv-0)

More

[Expo CLI](/more/expo-cli)[create-expo-app](/more/create-expo)[qr.expo.dev](/more/qr-codes)[Glossary of terms](/more/glossary-of-terms)

React Native

[Visit documentation](https://reactnative.dev/docs/components-and-apis)

[Archive](/archive)[Expo Snack](https://snack.expo.dev)[Discord and Forums](https://chat.expo.dev)[Newsletter](https://expo.dev/mailing-list/signup)

Expo TaskManager
================

[GitHub](https://github.com/expo/expo/tree/sdk-53/packages/expo-task-manager)[npm](https://www.npmjs.com/package/expo-task-manager)

A library that provides support for tasks that can run in the background.

[GitHub](https://github.com/expo/expo/tree/sdk-53/packages/expo-task-manager)[npm](https://www.npmjs.com/package/expo-task-manager)

Android

iOS

Bundled version:

~13.1.5

---

`expo-task-manager` provides an API that allows you to manage long-running tasks, in particular those tasks that can run while your app is in the background. Some features of this library are used by other libraries under the hood. Here is a list of Expo SDK libraries that use `TaskManager`.

Libraries using Expo TaskManager
--------------------------------

* [Location](/versions/v53.0.0/sdk/location)
* [BackgroundTask](/versions/v53.0.0/sdk/background-task)
* [BackgroundFetch](/versions/v53.0.0/sdk/background-fetch)
* [Notifications](/versions/v53.0.0/sdk/notifications)

Installation
------------

Terminal

Copy

`-Â``npx expo install expo-task-manager`

If you are installing this in an [existing React Native app](/bare/overview), make sure to [install `expo`](/bare/installing-expo-modules) in your project.

  
> You can test `TaskManager` in the Expo Go app. However, check the documentation of each [library](/versions/v53.0.0/sdk/task-manager#libraries-using-expo-taskmanager) that uses `TaskManager` to confirm whether it supports testing in Expo Go.

Configurationâ iOS
--------------------

Standalone apps need some extra configuration: on iOS, each background feature requires a special key in `UIBackgroundModes` array in your Info.plist file.

Read more about how to configure this in the reference for each of the [libraries](/versions/v53.0.0/sdk/task-manager#libraries-using-expo-taskmanager) that use `TaskManager`.

Example
-------

Example

Copy

Open in Snack

```
import React from 'react';
import { Button, View, StyleSheet } from 'react-native';
import * as TaskManager from 'expo-task-manager';
import * as Location from 'expo-location';

const LOCATION_TASK_NAME = 'background-location-task';

const requestPermissions = async () => {
  const { status: foregroundStatus } = await Location.requestForegroundPermissionsAsync();
  if (foregroundStatus === 'granted') {
    const { status: backgroundStatus } = await Location.requestBackgroundPermissionsAsync();
    if (backgroundStatus === 'granted') {
      await Location.startLocationUpdatesAsync(LOCATION_TASK_NAME, {
        accuracy: Location.Accuracy.Balanced,
      });
    }
  }
};

const PermissionsButton = () => (
  <View style={styles.container}>
    <Button onPress={requestPermissions} title="Enable background location" />
  </View>
);

TaskManager.defineTask(LOCATION_TASK_NAME, ({ data, error }) => {
  if (error) {
    // Error occurred - check `error.message` for more details.
    return;
  }
  if (data) {
    const { locations } = data;
    // do something with the locations captured in the background
  }
});

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
});

export default PermissionsButton;

```

API
---

```
import * as TaskManager from 'expo-task-manager';

```

Methods
-------

### `TaskManager.defineTask(taskName, taskExecutor)`

| Parameter | Type | Description |
| --- | --- | --- |
| taskName | `string` | Name of the task. It must be the same as the name you provided when registering the task. |
| taskExecutor | `TaskManagerTaskExecutor<T>` | A function that will be invoked when the task with given `taskName` is executed. |

  

Defines task function. It must be called in the global scope of your JavaScript bundle.
In particular, it cannot be called in any of React lifecycle methods like `componentDidMount`.
This limitation is due to the fact that when the application is launched in the background,
we need to spin up your JavaScript app, run your task and then shut down â no views are mounted
in this scenario.

Returns:

`void`

### `TaskManager.getRegisteredTasksAsync()`

Provides information about tasks registered in the app.

Returns:

`Promise<TaskManagerTask[]>`

A promise which fulfills with an array of tasks registered in the app.

Example

```
[
  {
    taskName: 'location-updates-task-name',
    taskType: 'location',
    options: {
      accuracy: Location.Accuracy.High,
      showsBackgroundLocationIndicator: false,
    },
  },
  {
    taskName: 'geofencing-task-name',
    taskType: 'geofencing',
    options: {
      regions: [...],
    },
  },
]

```

### `TaskManager.getTaskOptionsAsync(taskName)`

| Parameter | Type | Description |
| --- | --- | --- |
| taskName | `string` | Name of the task. |

  

Retrieves `options` associated with the task, that were passed to the function registering the task
(e.g. `Location.startLocationUpdatesAsync`).

Returns:

`Promise<TaskOptions>`

A promise which fulfills with the `options` object that was passed while registering task
with given name or `null` if task couldn't be found.

### `TaskManager.isAvailableAsync()`

Determine if the `TaskManager` API can be used in this app.

Returns:

`Promise<boolean>`

A promise which fulfills with `true` if the API can be used, and `false` otherwise.
With Expo Go, `TaskManager` is not available on Android, and does not support background execution on iOS.
Use a development build to avoid limitations: <https://expo.fyi/dev-client>.
On the web, it always returns `false`.

### `TaskManager.isTaskDefined(taskName)`

| Parameter | Type | Description |
| --- | --- | --- |
| taskName | `string` | Name of the task. |

  

Checks whether the task is already defined.

Returns:

`boolean`

### `TaskManager.isTaskRegisteredAsync(taskName)`

| Parameter | Type | Description |
| --- | --- | --- |
| taskName | `string` | Name of the task. |

  

Determine whether the task is registered. Registered tasks are stored in a persistent storage and
preserved between sessions.

Returns:

`Promise<boolean>`

A promise which resolves to `true` if a task with the given name is registered, otherwise `false`.

### `TaskManager.unregisterAllTasksAsync()`

Unregisters all tasks registered for the running app. You may want to call this when the user is
signing out and you no longer need to track his location or run any other background tasks.

Returns:

`Promise<void>`

A promise which fulfills as soon as all tasks are completely unregistered.

### `TaskManager.unregisterTaskAsync(taskName)`

| Parameter | Type | Description |
| --- | --- | --- |
| taskName | `string` | Name of the task to unregister. |

  

Unregisters task from the app, so the app will not be receiving updates for that task anymore.
*It is recommended to use methods specialized by modules that registered the task, eg.
[`Location.stopLocationUpdatesAsync`](/versions/v53.0.0/sdk/location#expolocationstoplocationupdatesasynctaskname).*

Returns:

`Promise<void>`

A promise which fulfills as soon as the task is unregistered.

Interfaces
----------

### `TaskManagerError`

Error object that can be received through [`TaskManagerTaskBody`](#taskmanagertaskbody) when the
task fails.

| Property | Type | Description |
| --- | --- | --- |
| code | `string | number` | - |
| message | `string` | - |

### `TaskManagerTask`

Represents an already registered task.

| Property | Type | Description |
| --- | --- | --- |
| options | `any` | Provides `options` that the task was registered with. |
| taskName | `string` | Name that the task is registered with. |
| taskType | `string` | Type of the task which depends on how the task was registered. |

### `TaskManagerTaskBody`

Represents the object that is passed to the task executor.

| Property | Type | Description |
| --- | --- | --- |
| data | `T` | An object of data passed to the task executor. Its properties depend on the type of the task. |
| error | `null | TaskManagerError` | Error object if the task failed or `null` otherwise. |
| executionInfo | `TaskManagerTaskBodyExecutionInfo` | Additional details containing unique ID of task event and name of the task. |

### `TaskManagerTaskBodyExecutionInfo`

Additional details about execution provided in `TaskManagerTaskBody`.

| Property | Type | Description |
| --- | --- | --- |
| appState(optional) | `'active' | 'background' | 'inactive'` | Only for:â iOS  State of the application. |
| eventId | `string` | Unique ID of task event. |
| taskName | `string` | Name of the task. |

Types
-----

### `TaskManagerTaskExecutor(body)`

Type of task executor â a function that handles the task.

| Parameter | Type |
| --- | --- |
| body | `TaskManagerTaskBody<T>` |

Returns:

`Promise<any>`

[Previous (Expo SDK)

SystemUI](/versions/v53.0.0/sdk/system-ui)[Next (Expo SDK)

TrackingTransparency](/versions/v53.0.0/sdk/tracking-transparency)

Was this doc helpful?

* Share your feedback
* [Ask a question on the forums about TaskManager](https://chat.expo.dev/)
* [View open bug reports for TaskManager](https://github.com/expo/expo/labels/TaskManager)
* [Edit this page](https://github.com/expo/expo/edit/main/docs/pages/versions/v53.0.0/sdk/task-manager.mdx)

Sign up for the Expo Newsletter

Sign Up

Unsubscribe at any time. Read our [privacy policy](https://expo.dev/privacy).

On this page

[Libraries using Expo TaskManager](/versions/v53.0.0/sdk/task-manager/#libraries-using-expo-taskmanager)[Installation](/versions/v53.0.0/sdk/task-manager/#installation)[Configurationâ](/versions/v53.0.0/sdk/task-manager/#configuration)[Example](/versions/v53.0.0/sdk/task-manager/#example)[API](/versions/v53.0.0/sdk/task-manager/#api)[Methods](/versions/v53.0.0/sdk/task-manager/#methods)[`defineTask()`](/versions/v53.0.0/sdk/task-manager/#taskmanagerdefinetasktaskname-taskexecutor)[`getRegisteredTasksAsync()`](/versions/v53.0.0/sdk/task-manager/#taskmanagergetregisteredtasksasync)[`getTaskOptionsAsync()`](/versions/v53.0.0/sdk/task-manager/#taskmanagergettaskoptionsasynctaskname)[`isAvailableAsync()`](/versions/v53.0.0/sdk/task-manager/#taskmanagerisavailableasync)[`isTaskDefined()`](/versions/v53.0.0/sdk/task-manager/#taskmanageristaskdefinedtaskname)[`isTaskRegisteredAsync()`](/versions/v53.0.0/sdk/task-manager/#taskmanageristaskregisteredasynctaskname)[`unregisterAllTasksAsync()`](/versions/v53.0.0/sdk/task-manager/#taskmanagerunregisteralltasksasync)[`unregisterTaskAsync()`](/versions/v53.0.0/sdk/task-manager/#taskmanagerunregistertaskasynctaskname)[Interfaces](/versions/v53.0.0/sdk/task-manager/#interfaces)[`TaskManagerError`](/versions/v53.0.0/sdk/task-manager/#taskmanagererror)[`TaskManagerTask`](/versions/v53.0.0/sdk/task-manager/#taskmanagertask)[`TaskManagerTaskBody`](/versions/v53.0.0/sdk/task-manager/#taskmanagertaskbody)[`TaskManagerTaskBodyExecutionInfo`](/versions/v53.0.0/sdk/task-manager/#taskmanagertaskbodyexecutioninfo)[Types](/versions/v53.0.0/sdk/task-manager/#types)[`TaskManagerTaskExecutor()`](/versions/v53.0.0/sdk/task-manager/#taskmanagertaskexecutorbody)