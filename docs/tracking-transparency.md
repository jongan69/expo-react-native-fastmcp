TrackingTransparency - Expo Documentation

[Docs](/)

[Blog](https://expo.dev/blog)[Changelog](https://expo.dev/changelog)[Star Us on GitHub](https://github.com/expo/expo)

Search

[Home](/)[Guides](/guides/overview)[EAS](/eas)[Reference](/versions/latest)[Learn](/tutorial/overview)

Reference version

Configuration files

[app.json / app.config.js](/versions/v52.0.0/config/app)[babel.config.js

NEW](/versions/v52.0.0/config/babel)[metro.config.js](/versions/v52.0.0/config/metro)[package.json

NEW](/versions/v52.0.0/config/package-json)

Expo SDK

[Expo

NEW](/versions/v52.0.0/sdk/expo)[Accelerometer](/versions/v52.0.0/sdk/accelerometer)[AppleAuthentication](/versions/v52.0.0/sdk/apple-authentication)[Application](/versions/v52.0.0/sdk/application)[Asset](/versions/v52.0.0/sdk/asset)[AsyncStorage](/versions/v52.0.0/sdk/async-storage)[Audio (expo-audio)

NEW](/versions/v52.0.0/sdk/audio)[Audio (expo-av)](/versions/v52.0.0/sdk/audio-av)[AuthSession](/versions/v52.0.0/sdk/auth-session)[AV](/versions/v52.0.0/sdk/av)[BackgroundFetch](/versions/v52.0.0/sdk/background-fetch)[BackgroundTask

NEW](/versions/v52.0.0/sdk/background-task)[Barometer](/versions/v52.0.0/sdk/barometer)[Battery](/versions/v52.0.0/sdk/battery)[BlurView](/versions/v52.0.0/sdk/blur-view)[Brightness](/versions/v52.0.0/sdk/brightness)[BuildProperties](/versions/v52.0.0/sdk/build-properties)[Calendar](/versions/v52.0.0/sdk/calendar)[Camera](/versions/v52.0.0/sdk/camera)[captureRef](/versions/v52.0.0/sdk/captureRef)[Cellular](/versions/v52.0.0/sdk/cellular)[Checkbox](/versions/v52.0.0/sdk/checkbox)[Clipboard](/versions/v52.0.0/sdk/clipboard)[Constants](/versions/v52.0.0/sdk/constants)[Contacts](/versions/v52.0.0/sdk/contacts)[Crypto](/versions/v52.0.0/sdk/crypto)[DateTimePicker](/versions/v52.0.0/sdk/date-time-picker)[DevClient](/versions/v52.0.0/sdk/dev-client)[Device](/versions/v52.0.0/sdk/device)[DeviceMotion](/versions/v52.0.0/sdk/devicemotion)[DocumentPicker](/versions/v52.0.0/sdk/document-picker)[Encoding](/versions/v52.0.0/sdk/encoding)[FaceDetector](/versions/v52.0.0/sdk/facedetector)[FileSystem](/versions/v52.0.0/sdk/filesystem)[FileSystem (next)

NEW](/versions/v52.0.0/sdk/filesystem-next)[Fingerprint

NEW](/versions/v52.0.0/sdk/fingerprint)[FlashList](/versions/v52.0.0/sdk/flash-list)[Font](/versions/v52.0.0/sdk/font)[GestureHandler](/versions/v52.0.0/sdk/gesture-handler)[GLView](/versions/v52.0.0/sdk/gl-view)[Gyroscope](/versions/v52.0.0/sdk/gyroscope)[Haptics](/versions/v52.0.0/sdk/haptics)[Image](/versions/v52.0.0/sdk/image)[ImageManipulator](/versions/v52.0.0/sdk/imagemanipulator)[ImagePicker](/versions/v52.0.0/sdk/imagepicker)[IntentLauncher](/versions/v52.0.0/sdk/intent-launcher)[KeepAwake](/versions/v52.0.0/sdk/keep-awake)[LightSensor](/versions/v52.0.0/sdk/light-sensor)[LinearGradient](/versions/v52.0.0/sdk/linear-gradient)[Linking](/versions/v52.0.0/sdk/linking)[LivePhoto

NEW](/versions/v52.0.0/sdk/live-photo)[LocalAuthentication](/versions/v52.0.0/sdk/local-authentication)[Localization](/versions/v52.0.0/sdk/localization)[Location](/versions/v52.0.0/sdk/location)[Lottie](/versions/v52.0.0/sdk/lottie)[Magnetometer](/versions/v52.0.0/sdk/magnetometer)[MailComposer](/versions/v52.0.0/sdk/mail-composer)[Manifests](/versions/v52.0.0/sdk/manifests)[Maps

ALPHA](/versions/v52.0.0/sdk/maps)[MapView (react-native-maps)](/versions/v52.0.0/sdk/map-view)[MaskedView](/versions/v52.0.0/sdk/masked-view)[MediaLibrary](/versions/v52.0.0/sdk/media-library)[NavigationBar](/versions/v52.0.0/sdk/navigation-bar)[NetInfo](/versions/v52.0.0/sdk/netinfo)[Network](/versions/v52.0.0/sdk/network)[Notifications](/versions/v52.0.0/sdk/notifications)[Pedometer](/versions/v52.0.0/sdk/pedometer)[Picker](/versions/v52.0.0/sdk/picker)[Print](/versions/v52.0.0/sdk/print)[Reanimated](/versions/v52.0.0/sdk/reanimated)[registerRootComponent](/versions/v52.0.0/sdk/register-root-component)[Router

NEW](/versions/v52.0.0/sdk/router)[Router UI

NEW](/versions/v52.0.0/sdk/router-ui)[SafeAreaContext](/versions/v52.0.0/sdk/safe-area-context)[ScreenCapture](/versions/v52.0.0/sdk/screen-capture)[ScreenOrientation](/versions/v52.0.0/sdk/screen-orientation)[Screens](/versions/v52.0.0/sdk/screens)[SecureStore](/versions/v52.0.0/sdk/securestore)[SegmentedControl](/versions/v52.0.0/sdk/segmented-control)[Sensors](/versions/v52.0.0/sdk/sensors)[Sharing](/versions/v52.0.0/sdk/sharing)[Skia](/versions/v52.0.0/sdk/skia)[Slider](/versions/v52.0.0/sdk/slider)[SMS](/versions/v52.0.0/sdk/sms)[Speech](/versions/v52.0.0/sdk/speech)[SplashScreen](/versions/v52.0.0/sdk/splash-screen)[SQLite](/versions/v52.0.0/sdk/sqlite)[StatusBar](/versions/v52.0.0/sdk/status-bar)[StoreReview](/versions/v52.0.0/sdk/storereview)[Stripe](/versions/v52.0.0/sdk/stripe)[Svg](/versions/v52.0.0/sdk/svg)[Symbols](/versions/v52.0.0/sdk/symbols)[SystemUI](/versions/v52.0.0/sdk/system-ui)[TaskManager](/versions/v52.0.0/sdk/task-manager)[TrackingTransparency](/versions/v52.0.0/sdk/tracking-transparency)[Updates](/versions/v52.0.0/sdk/updates)[URL](/versions/v52.0.0/sdk/url)[Video (expo-av)](/versions/v52.0.0/sdk/video-av)[Video (expo-video)

NEW](/versions/v52.0.0/sdk/video)[VideoThumbnails](/versions/v52.0.0/sdk/video-thumbnails)[ViewPager](/versions/v52.0.0/sdk/view-pager)[WebBrowser](/versions/v52.0.0/sdk/webbrowser)[WebView](/versions/v52.0.0/sdk/webview)

Technical specs

[Expo Updates v1](/technical-specs/expo-updates-1)[Expo Structured Field Values](/technical-specs/expo-sfv-0)

More

[Expo CLI](/more/expo-cli)[create-expo-app](/more/create-expo)[qr.expo.dev](/more/qr-codes)[Glossary of terms](/more/glossary-of-terms)

React Native

[Visit documentation](https://reactnative.dev/docs/components-and-apis)

[Archive](/archive)[Expo Snack](https://snack.expo.dev)[Discord and Forums](https://chat.expo.dev)[Newsletter](https://expo.dev/mailing-list/signup)

Expo TrackingTransparency
=========================

[GitHub](https://github.com/expo/expo/tree/sdk-52/packages/expo-tracking-transparency)[npm](https://www.npmjs.com/package/expo-tracking-transparency)

A library for requesting permission to track the users on devices using iOS 14 and higher.

[GitHub](https://github.com/expo/expo/tree/sdk-52/packages/expo-tracking-transparency)[npm](https://www.npmjs.com/package/expo-tracking-transparency)

Android

iOS

tvOS

Bundled version:

~5.1.1

---

A library for requesting permission to track the user or their device. Examples of data used for tracking include email address, device ID, advertising ID, and more. This permission is only necessary on iOS 14 and higher; on iOS 13 and below this permission is always granted. If the "Allow Apps to Request to Track" device-level setting is off, this permission will be denied. Be sure to add `NSUserTrackingUsageDescription` to your [Info.plist](/versions/v52.0.0/config/app#infoplist) to explain how the user will be tracked. Otherwise, your app will be rejected by Apple.

For more information on Apple's new App Tracking Transparency framework, see their [documentation](https://developer.apple.com/app-store/user-privacy-and-data-use/).

Installation
------------

Terminal

Copy

`-Â``npx expo install expo-tracking-transparency`

If you are installing this in an [existing React Native app](/bare/overview), make sure to [install `expo`](/bare/installing-expo-modules) in your project.

Configuration in app config
---------------------------

You can configure `expo-tracking-transparency` using its built-in [config plugin](/config-plugins/introduction) if you use config plugins in your project ([EAS Build](/build/introduction) or `npx expo run:[android|ios]`). The plugin allows you to configure various properties that cannot be set at runtime and require building a new app binary to take effect.

### Example app.json with config plugin

app.json

Copy

```
{
  "expo": {
    "plugins": [
      [
        "expo-tracking-transparency",
        {
          "userTrackingPermission": "This identifier will be used to deliver personalized ads to you."
        }
      ]
    ]
  }
}

```

### Configurable properties

| Name | Default | Description |
| --- | --- | --- |
| `userTrackingPermission` | `"Allow this app to collect app-related data that can be used for tracking you or your device."` | Only for:â iOS  Sets the iOS `NSUserTrackingUsageDescription` permission message in Info.plist. |

Are you using this library in an existing React Native app?

If you're not using Continuous Native Generation ([CNG](/workflow/continuous-native-generation)) (you're using native android and ios projects manually), then you need to configure following permissions in your native projects:

* For Android, add `com.google.android.gms.permission.AD_ID` permission to your project's android/app/src/main/AndroidManifest.xml.

  ```
  <uses-permission android:name="com.google.android.gms.permission.AD_ID"/>

  ```
* For iOS, add `NSUserTrackingUsageDescription` key to your project's ios/[app]/Info.plist:

  ```
  <key>NSUserTrackingUsageDescription</key>
  <string>Your custom usage description string here.</string>

  ```

Usage
-----

Basic tracking transparency usage

Copy

Open in Snack

```
import { useEffect } from 'react';
import { Text, StyleSheet, View } from 'react-native';
import { requestTrackingPermissionsAsync } from 'expo-tracking-transparency';

export default function App() {
  useEffect(() => {
    (async () => {
      const { status } = await requestTrackingPermissionsAsync();
      if (status === 'granted') {
        console.log('Yay! I have user permission to track data');
      }
    })();
  }, []);

  return (
    <View style={styles.container}>
      <Text>Tracking Transparency Module Example</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
});

```

API
---

```
import * as ExpoTrackingTransparency from 'expo-tracking-transparency';

```

Hooks
-----

### `useTrackingPermissions(options)`

Android

iOS

tvOS

| Parameter | Type |
| --- | --- |
| options(optional) | `PermissionHookOptions<object>` |

  

Check or request the user to authorize or deny access to app-related data that can be used for tracking
the user or the device. Examples of data used for tracking include email address, device ID,
advertising ID, etc. On iOS 14.5 and above, if the user denies this permission, any attempt to
collect the IDFA will return a string of 0s.

The system remembers the userâs choice and doesnât prompt again unless a user uninstalls and then
reinstalls the app on the device.

On Android, web, and iOS 13 and below, this method always returns that the permission was
granted.

Returns:

`[null | PermissionResponse, RequestPermissionMethod<PermissionResponse>, GetPermissionMethod<PermissionResponse>]`

Example

```
const [status, requestPermission] = useTrackingPermissions();

```

Methods
-------

### `getAdvertisingId()`

Android

iOS

tvOS

Gets the advertising ID, a UUID string intended only for advertising. Use this string for
frequency capping, attribution, conversion events, estimating the number of unique users,
advertising fraud detection, and debugging.

As a best practice, don't store the advertising ID. Instead, call this function each time your
app needs to use the advertising ID. Users can change whether they allow app tracking and can
reset their advertising ID at any time in their system settings. Check your app's authorization
using `getTrackingPermissionsAsync()` to determine the user's intent.

On Android, this function returns the "Android Advertising ID"
([AAID](https://developers.google.com/android/reference/com/google/android/gms/ads/identifier/AdvertisingIdClient.Info#public-string-getid)).
On Android devices that support multiple users, including guest users, it's possible for your app
to obtain different advertising IDs on the same device. These different IDs correspond to
different users who could be signed in on that device. See Google's documentation for more
information: [Get a user-resettable advertising
ID](https://developer.android.com/training/articles/ad-id).

On iOS, this function returns the "Identifier for Advertisers"
([IDFA](https://developer.apple.com/documentation/adsupport/asidentifiermanager/advertisingidentifier)),
a string that's unique to each device. On devices running iOS 14.5 and newer, your app must
request tracking authorization using `requestTrackingPermissionsAsync()` before it can get the
advertising identifier.

Returns:

`string | null`

Returns either a UUID `string` or `null`. It returns null in the following cases:

* On Android, when `isLimitAdTrackingEnabled()` is `true`
* In the iOS simulator, regardless of any settings
* On devices running iOS 14.5 and later if you haven't received permission using
  `requestTrackingPermissionsAsync()`
* On iOS, if you've requested permission and the user declines
* On iOS, when a profile or configuration restricts access to the advertising identifier, such as
  when the user has turned off the system-wide "Allow Apps to Request to Track" setting

Example

```
TrackingTransparency.getAdvertisingId();
// "E9228286-4C4E-4789-9D95-15827DCB291B"

```

### `getTrackingPermissionsAsync()`

Android

iOS

tvOS

Checks whether or not the user has authorized the app to access app-related data that can be used
for tracking the user or the device. See `requestTrackingPermissionsAsync` for more details.

On Android, web, and iOS 13 and below, this method always returns that the permission was
granted.

Returns:

`Promise<PermissionResponse>`

Example

```
const { granted } = await getTrackingPermissionsAsync();

if (granted) {
  // Your app is authorized to track the user or their device
}

```

### `isAvailable()`

Android

iOS

tvOS

Returns whether the TrackingTransparency API is available on the current device.

Returns:

`boolean`

On devices where the Tracking Transparency API is unavailable,
the get and request permissions methods will always resolve to `granted`.

### `requestTrackingPermissionsAsync()`

Android

iOS

tvOS

Requests the user to authorize or deny access to app-related data that can be used for tracking
the user or the device. Examples of data used for tracking include email address, device ID,
advertising ID, etc. On iOS 14.5 and above, if the user denies this permission, any attempt to
collect the IDFA will return a string of 0s.

The system remembers the userâs choice and doesnât prompt again unless a user uninstalls and then
reinstalls the app on the device.

On Android, web, and iOS 13 and below, this method always returns that the permission was
granted.

Returns:

`Promise<PermissionResponse>`

Example

```
const { granted } = await requestTrackingPermissionsAsync();

if (granted) {
  // Your app is authorized to track the user or their device
}

```

Interfaces
----------

### `PermissionResponse`

Android

iOS

tvOS

An object obtained by permissions get and request functions.

| Property | Type | Description |
| --- | --- | --- |
| canAskAgain | `boolean` | Indicates if user can be asked again for specific permission. If not, one should be directed to the Settings app in order to enable/disable the permission. |
| expires | `PermissionExpiration` | Determines time when the permission expires. |
| granted | `boolean` | A convenience boolean that indicates if the permission is granted. |
| status | `PermissionStatus` | Determines the status of the permission. |

Types
-----

### `PermissionExpiration`

Android

iOS

tvOS

Literal Type: `union`

Permission expiration time. Currently, all permissions are granted permanently.

Acceptable values are: `'never'` | `number`

### `PermissionHookOptions`

Android

iOS

tvOS

Literal Type: `union`

Acceptable values are: `PermissionHookBehavior` | `Options`

Enums
-----

### `PermissionStatus`

Android

iOS

tvOS

#### `DENIED`

`PermissionStatus.DENIED ï¼ "denied"`

User has denied the permission.

#### `GRANTED`

`PermissionStatus.GRANTED ï¼ "granted"`

User has granted the permission.

#### `UNDETERMINED`

`PermissionStatus.UNDETERMINED ï¼ "undetermined"`

User hasn't granted or denied the permission yet.

Permissions
-----------

### Android

The following permissions are added automatically through the library's AndroidManifest.xml.

| Android Permission | Description |
| --- | --- |
| `com.google.android.gms.permission.AD_ID` | Allows access to the Advertising ID for tracking and analytics. Required for apps targeting Android 13 (API level 33) or higher that use Google Play services' Advertising ID. |

### iOS

The following usage description keys are used by this library:

| Info.plist Key | Description |
| --- | --- |
| `NSUserTrackingUsageDescription` | A message that informs the user why an app is requesting permission to use data for tracking the user or the device. |

[Previous (Expo SDK)

TaskManager](/versions/v52.0.0/sdk/task-manager)[Next (Expo SDK)

Updates](/versions/v52.0.0/sdk/updates)

Was this doc helpful?

* Share your feedback
* [Ask a question on the forums about TrackingTransparency](https://chat.expo.dev/)
* [View open bug reports for TrackingTransparency](https://github.com/expo/expo/labels/TrackingTransparency)
* [Edit this page](https://github.com/expo/expo/edit/main/docs/pages/versions/v52.0.0/sdk/tracking-transparency.mdx)

Sign up for the Expo Newsletter

Sign Up

Unsubscribe at any time. Read our [privacy policy](https://expo.dev/privacy).

On this page

[Installation](/versions/v52.0.0/sdk/tracking-transparency/#installation)[Configuration in app config](/versions/v52.0.0/sdk/tracking-transparency/#configuration-in-app-config)[Example app.json with config plugin](/versions/v52.0.0/sdk/tracking-transparency/#example-appjson-with-config-plugin)[Configurable properties](/versions/v52.0.0/sdk/tracking-transparency/#configurable-properties)[Usage](/versions/v52.0.0/sdk/tracking-transparency/#usage)[API](/versions/v52.0.0/sdk/tracking-transparency/#api)[Hooks](/versions/v52.0.0/sdk/tracking-transparency/#hooks)[`useTrackingPermissions()`](/versions/v52.0.0/sdk/tracking-transparency/#usetrackingpermissionsoptions)[Methods](/versions/v52.0.0/sdk/tracking-transparency/#methods)[`getAdvertisingId()`](/versions/v52.0.0/sdk/tracking-transparency/#getadvertisingid)[`getTrackingPermissionsAsync()`](/versions/v52.0.0/sdk/tracking-transparency/#gettrackingpermissionsasync)[`isAvailable()`](/versions/v52.0.0/sdk/tracking-transparency/#isavailable)[`requestTrackingPermissionsAsync()`](/versions/v52.0.0/sdk/tracking-transparency/#requesttrackingpermissionsasync)[Interfaces](/versions/v52.0.0/sdk/tracking-transparency/#interfaces)[`PermissionResponse`](/versions/v52.0.0/sdk/tracking-transparency/#permissionresponse)[Types](/versions/v52.0.0/sdk/tracking-transparency/#types)[`PermissionExpiration`](/versions/v52.0.0/sdk/tracking-transparency/#permissionexpiration)[`PermissionHookOptions`](/versions/v52.0.0/sdk/tracking-transparency/#permissionhookoptions)[Enums](/versions/v52.0.0/sdk/tracking-transparency/#enums)[`PermissionStatus`](/versions/v52.0.0/sdk/tracking-transparency/#permissionstatus)[Permissions](/versions/v52.0.0/sdk/tracking-transparency/#permissions)[Android](/versions/v52.0.0/sdk/tracking-transparency/#android)[iOS](/versions/v52.0.0/sdk/tracking-transparency/#ios)[NSUserTrackingUsageDescription](/versions/v52.0.0/sdk/tracking-transparency/#permission-nsusertrackingusagedescription)