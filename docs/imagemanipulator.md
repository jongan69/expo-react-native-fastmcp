ImageManipulator - Expo Documentation

[Docs](/)

[Blog](https://expo.dev/blog)[Changelog](https://expo.dev/changelog)[Star Us on GitHub](https://github.com/expo/expo)

Search

[Home](/)[Guides](/guides/overview)[EAS](/eas)[Reference](/versions/latest)[Learn](/tutorial/overview)

Reference version

Configuration files

[app.json / app.config.js](/versions/v53.0.0/config/app)[babel.config.js](/versions/v53.0.0/config/babel)[metro.config.js](/versions/v53.0.0/config/metro)[package.json](/versions/v53.0.0/config/package-json)

Expo SDK

[Expo](/versions/v53.0.0/sdk/expo)[Accelerometer](/versions/v53.0.0/sdk/accelerometer)[AppleAuthentication](/versions/v53.0.0/sdk/apple-authentication)[Application](/versions/v53.0.0/sdk/application)[Asset](/versions/v53.0.0/sdk/asset)[Audio (expo-audio)](/versions/v53.0.0/sdk/audio)[Audio (expo-av)](/versions/v53.0.0/sdk/audio-av)[AuthSession](/versions/v53.0.0/sdk/auth-session)[AV](/versions/v53.0.0/sdk/av)[BackgroundFetch](/versions/v53.0.0/sdk/background-fetch)[BackgroundTask

NEW](/versions/v53.0.0/sdk/background-task)[Barometer](/versions/v53.0.0/sdk/barometer)[Battery](/versions/v53.0.0/sdk/battery)[BlurView](/versions/v53.0.0/sdk/blur-view)[Brightness](/versions/v53.0.0/sdk/brightness)[BuildProperties](/versions/v53.0.0/sdk/build-properties)[Calendar](/versions/v53.0.0/sdk/calendar)[Camera](/versions/v53.0.0/sdk/camera)[Cellular](/versions/v53.0.0/sdk/cellular)[Checkbox](/versions/v53.0.0/sdk/checkbox)[Clipboard](/versions/v53.0.0/sdk/clipboard)[Constants](/versions/v53.0.0/sdk/constants)[Contacts](/versions/v53.0.0/sdk/contacts)[Crypto](/versions/v53.0.0/sdk/crypto)[DevClient](/versions/v53.0.0/sdk/dev-client)[Device](/versions/v53.0.0/sdk/device)[DeviceMotion](/versions/v53.0.0/sdk/devicemotion)[DocumentPicker](/versions/v53.0.0/sdk/document-picker)[FileSystem](/versions/v53.0.0/sdk/filesystem)[FileSystem (next)](/versions/v53.0.0/sdk/filesystem-next)[Fingerprint

NEW](/versions/v53.0.0/sdk/fingerprint)[Font](/versions/v53.0.0/sdk/font)[GLView](/versions/v53.0.0/sdk/gl-view)[Gyroscope](/versions/v53.0.0/sdk/gyroscope)[Haptics](/versions/v53.0.0/sdk/haptics)[Image](/versions/v53.0.0/sdk/image)[ImageManipulator](/versions/v53.0.0/sdk/imagemanipulator)[ImagePicker](/versions/v53.0.0/sdk/imagepicker)[IntentLauncher](/versions/v53.0.0/sdk/intent-launcher)[KeepAwake](/versions/v53.0.0/sdk/keep-awake)[LightSensor](/versions/v53.0.0/sdk/light-sensor)[LinearGradient](/versions/v53.0.0/sdk/linear-gradient)[Linking](/versions/v53.0.0/sdk/linking)[LivePhoto](/versions/v53.0.0/sdk/live-photo)[LocalAuthentication](/versions/v53.0.0/sdk/local-authentication)[Localization](/versions/v53.0.0/sdk/localization)[Location](/versions/v53.0.0/sdk/location)[Magnetometer](/versions/v53.0.0/sdk/magnetometer)[MailComposer](/versions/v53.0.0/sdk/mail-composer)[Manifests](/versions/v53.0.0/sdk/manifests)[Maps

ALPHA](/versions/v53.0.0/sdk/maps)[MediaLibrary](/versions/v53.0.0/sdk/media-library)[MeshGradient

NEW](/versions/v53.0.0/sdk/mesh-gradient)[NavigationBar](/versions/v53.0.0/sdk/navigation-bar)[Network](/versions/v53.0.0/sdk/network)[Notifications](/versions/v53.0.0/sdk/notifications)[Pedometer](/versions/v53.0.0/sdk/pedometer)[Print](/versions/v53.0.0/sdk/print)[Router](/versions/v53.0.0/sdk/router)[Router UI](/versions/v53.0.0/sdk/router-ui)[ScreenCapture](/versions/v53.0.0/sdk/screen-capture)[ScreenOrientation](/versions/v53.0.0/sdk/screen-orientation)[SecureStore](/versions/v53.0.0/sdk/securestore)[Sensors](/versions/v53.0.0/sdk/sensors)[Sharing](/versions/v53.0.0/sdk/sharing)[SMS](/versions/v53.0.0/sdk/sms)[Speech](/versions/v53.0.0/sdk/speech)[SplashScreen](/versions/v53.0.0/sdk/splash-screen)[SQLite](/versions/v53.0.0/sdk/sqlite)[StatusBar](/versions/v53.0.0/sdk/status-bar)[StoreReview](/versions/v53.0.0/sdk/storereview)[Symbols](/versions/v53.0.0/sdk/symbols)[SystemUI](/versions/v53.0.0/sdk/system-ui)[TaskManager](/versions/v53.0.0/sdk/task-manager)[TrackingTransparency](/versions/v53.0.0/sdk/tracking-transparency)[UI

ALPHA](/versions/v53.0.0/sdk/ui)[Updates](/versions/v53.0.0/sdk/updates)[Video (expo-av)](/versions/v53.0.0/sdk/video-av)[Video (expo-video)](/versions/v53.0.0/sdk/video)[VideoThumbnails](/versions/v53.0.0/sdk/video-thumbnails)[WebBrowser](/versions/v53.0.0/sdk/webbrowser)

Third-party libraries

[Overview](/versions/v53.0.0/sdk/third-party-overview)[@react-native-async-storage/async-storage](/versions/v53.0.0/sdk/async-storage)[@react-native-community/datetimepicker](/versions/v53.0.0/sdk/date-time-picker)[@react-native-community/netinfo](/versions/v53.0.0/sdk/netinfo)[@react-native-community/slider](/versions/v53.0.0/sdk/slider)[@react-native-masked-view/masked-view](/versions/v53.0.0/sdk/masked-view)[@react-native-picker/picker](/versions/v53.0.0/sdk/picker)[@react-native-segmented-control/segmented-control](/versions/v53.0.0/sdk/segmented-control)[@shopify/flash-list](/versions/v53.0.0/sdk/flash-list)[@shopify/react-native-skia](/versions/v53.0.0/sdk/skia)[@stripe/stripe-react-native](/versions/v53.0.0/sdk/stripe)[lottie-react-native](/versions/v53.0.0/sdk/lottie)[react-native-gesture-handler](/versions/v53.0.0/sdk/gesture-handler)[react-native-maps](/versions/v53.0.0/sdk/map-view)[react-native-pager-view](/versions/v53.0.0/sdk/view-pager)[react-native-reanimated](/versions/v53.0.0/sdk/reanimated)[react-native-safe-area-context](/versions/v53.0.0/sdk/safe-area-context)[react-native-screens](/versions/v53.0.0/sdk/screens)[react-native-svg](/versions/v53.0.0/sdk/svg)[react-native-view-shot](/versions/v53.0.0/sdk/captureRef)[react-native-webview](/versions/v53.0.0/sdk/webview)

Technical specs

[Expo Updates v1](/technical-specs/expo-updates-1)[Expo Structured Field Values](/technical-specs/expo-sfv-0)

More

[Expo CLI](/more/expo-cli)[create-expo-app](/more/create-expo)[qr.expo.dev](/more/qr-codes)[Glossary of terms](/more/glossary-of-terms)

React Native

[Visit documentation](https://reactnative.dev/docs/components-and-apis)

[Archive](/archive)[Expo Snack](https://snack.expo.dev)[Discord and Forums](https://chat.expo.dev)[Newsletter](https://expo.dev/mailing-list/signup)

Expo ImageManipulator iconExpo ImageManipulator
===============================================

[GitHub](https://github.com/expo/expo/tree/sdk-53/packages/expo-image-manipulator)[npm](https://www.npmjs.com/package/expo-image-manipulator)

A library that provides an API for image manipulation on the local file system.

[GitHub](https://github.com/expo/expo/tree/sdk-53/packages/expo-image-manipulator)[npm](https://www.npmjs.com/package/expo-image-manipulator)

Android

iOS

Web

Bundled version:

~13.1.6

---

`expo-image-manipulator` provides an API to modify images stored on the local file system.

Installation
------------

Terminal

Copy

`-Â``npx expo install expo-image-manipulator`

If you are installing this in an [existing React Native app](/bare/overview), make sure to [install `expo`](/bare/installing-expo-modules) in your project.

Usage
-----

This will first rotate the image 90 degrees clockwise, then flip the rotated image vertically and save it as a PNG.

Basic ImageManipulator usage

Copy

Open in Snack

```
import { useState } from 'react';
import { Button, Image, StyleSheet, View } from 'react-native';
import { Asset } from 'expo-asset';
import { FlipType, SaveFormat, useImageManipulator } from 'expo-image-manipulator';

const IMAGE = Asset.fromModule(require('./assets/snack-icon.png'));

export default function App() {
  const [image, setImage] = useState(IMAGE);
  const context = useImageManipulator(IMAGE.uri);

  const rotate90andFlip = async () => {
    context.rotate(90).flip(FlipType.Vertical);
    const image = await context.renderAsync();
    const result = await image.saveAsync({
      format: SaveFormat.PNG,
    });

    setImage(result);
  };

  return (
    <View style={styles.container}>
      <View style={styles.imageContainer}>
        <Image source={{ uri: image.localUri || image.uri }} style={styles.image} />
      </View>
      <Button title="Rotate and Flip" onPress={rotate90andFlip} />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
  },
  imageContainer: {
    marginVertical: 20,
    alignItems: 'center',
    justifyContent: 'center',
  },
  image: {
    width: 300,
    height: 300,
    resizeMode: 'contain',
  },
});

```

API
---

```
import * as ImageManipulator from 'expo-image-manipulator';

```

Constants
---------

### `ImageManipulator.ImageManipulator`

Type: `ImageManipulator`

Hooks
-----

### `useImageManipulator(source)`

| Parameter | Type |
| --- | --- |
| source | `string | SharedRef<'image'>` |

  

Returns:

`ImageManipulatorContext`

Classes
-------

### `ImageManipulator`

Type: Class extends `_default`

ImageManipulator Methods

### `manipulate(source)`

| Parameter | Type |
| --- | --- |
| source | `string | SharedRef<'image'>` |

  

Loads an image from the given URI and creates a new image manipulation context.

Returns:

`ImageManipulatorContext`

### `ImageManipulatorContext`

Type: Class extends `SharedObject`

A context for an image manipulation. It provides synchronous, chainable functions that schedule transformations on the original image to the background thread.
Use an asynchronous [`renderAsync`](#contextrenderasync) to await for all transformations to finish and access the final image.

ImageManipulatorContext Methods

### `crop(rect)`

| Parameter | Type | Description |
| --- | --- | --- |
| rect | `{  height: number,   originX: number,   originY: number,   width: number }` | Fields specify top-left corner and dimensions of a crop rectangle. |

  

Crops the image to the given rectangle's origin and size.

Returns:

`ImageManipulatorContext`

### `extent(options)`

Only for:â

Web

| Parameter | Type |
| --- | --- |
| options | `{  backgroundColor: null | string,   height: number,   originX: number,   originY: number,   width: number }` |

  

Set the image size and offset. If the image is enlarged, unfilled areas are set to the `backgroundColor`.
To position the image, use `originX` and `originY`.

Returns:

`ImageManipulatorContext`

### `flip(flipType)`

| Parameter | Type | Description |
| --- | --- | --- |
| flipType | `'vertical' | 'horizontal'` | An axis on which image will be flipped. Only one flip per transformation is available. If you want to flip according to both axes then provide two separate transformations. |

  

Flips the image vertically or horizontally.

Returns:

`ImageManipulatorContext`

### `renderAsync()`

Awaits for all manipulation tasks to finish and resolves with a reference to the resulted native image.

Returns:

`Promise<ImageRef>`

### `reset()`

Resets the manipulator context to the originally loaded image.

Returns:

`ImageManipulatorContext`

### `resize(size)`

| Parameter | Type | Description |
| --- | --- | --- |
| size | `{  height: null | number,   width: null | number }` | Values correspond to the result image dimensions. If you specify only one value, the other will be calculated automatically to preserve image ratio. |

  

Resizes the image to the given size.

Returns:

`ImageManipulatorContext`

### `rotate(degrees)`

| Parameter | Type | Description |
| --- | --- | --- |
| degrees | `number` | Degrees to rotate the image. Rotation is clockwise when the value is positive and counter-clockwise when negative. |

  

Rotates the image by the given number of degrees.

Returns:

`ImageManipulatorContext`

### `ImageRef`

Type: Class extends `SharedRef<'image'>`

A reference to a native instance of the image.

ImageRef Properties

### `height`

Type: `number`

Height of the image.

### `nativeRefType`

Type: `string`

The type of the native reference.

### `width`

Type: `number`

Width of the image.

ImageRef Methods

### `saveAsync(options)`

| Parameter | Type | Description |
| --- | --- | --- |
| options(optional) | `SaveOptions` | A map defining how modified image should be saved. |

  

Saves the image to the file system in the cache directory.

Returns:

`Promise<ImageResult>`

Methods
-------

> Deprecated It has been replaced by the new, contextual and object-oriented API.
> Use [`ImageManipulator.manipulate`](#manipulateuri) or [`useImageManipulator`](#useimagemanipulatoruri) instead.

### `ImageManipulator.manipulateAsync(uri, actions, saveOptions)`

| Parameter | Type | Description |
| --- | --- | --- |
| uri | `string` | URI of the file to manipulate. Should be on the local file system or a base64 data URI. |
| actions(optional) | `Action[]` | An array of objects representing manipulation options. Each object should have only one of the keys that corresponds to specific transformation.  Default:`[]` |
| saveOptions(optional) | `SaveOptions` | A map defining how modified image should be saved.  Default:`{}` |

  

Manipulate the image provided via `uri`. Available modifications are rotating, flipping (mirroring),
resizing and cropping. Each invocation results in a new file. With one invocation you can provide
a set of actions to perform over the image. Overwriting the source file would not have an effect
in displaying the result as images are cached.

Returns:

`Promise<ImageResult>`

Promise which fulfils with [`ImageResult`](#imageresult) object.

Types
-----

### `Action`

Literal Type: `union`

Acceptable values are: `ActionResize` | `ActionRotate` | `ActionFlip` | `ActionCrop` | `ActionExtent`

### `ActionCrop`

| Property | Type | Description |
| --- | --- | --- |
| crop | `{  height: number,   originX: number,   originY: number,   width: number }` | Fields specify top-left corner and dimensions of a crop rectangle. |

### `ActionExtent`

| Property | Type | Description |
| --- | --- | --- |
| extent | `{  backgroundColor: string | null,   height: number,   originX: number,   originY: number,   width: number }` | Only for:â Web  Set the image size and offset. If the image is enlarged, unfilled areas are set to the `backgroundColor`. To position the image, use `originX` and `originY`. |

### `ActionFlip`

| Property | Type | Description |
| --- | --- | --- |
| flip | `FlipType` | An axis on which image will be flipped. Only one flip per transformation is available. If you want to flip according to both axes then provide two separate transformations. |

### `ActionResize`

| Property | Type | Description |
| --- | --- | --- |
| resize | `{  height: number,   width: number }` | Values correspond to the result image dimensions. If you specify only one value, the other will be calculated automatically to preserve image ratio. |

### `ActionRotate`

| Property | Type | Description |
| --- | --- | --- |
| rotate | `number` | Degrees to rotate the image. Rotation is clockwise when the value is positive and counter-clockwise when negative. |

### `ImageResult`

| Property | Type | Description |
| --- | --- | --- |
| base64(optional) | `string` | It is included if the `base64` save option was truthy, and is a string containing the JPEG/PNG (depending on `format`) data of the image in Base64. Prepend that with `'data:image/xxx;base64,'` to get a data URI, which you can use as the source for an `Image` element for example (where `xxx` is `jpeg` or `png`). |
| height | `number` | Height of the image or video. |
| uri | `string` | An URI to the modified image (usable as the source for an `Image` or `Video` element). |
| width | `number` | Width of the image or video. |

### `SaveOptions`

A map defining how modified image should be saved.

| Property | Type | Description |
| --- | --- | --- |
| base64(optional) | `boolean` | Whether to also include the image data in Base64 format. |
| compress(optional) | `number` | A value in range `0.0` - `1.0` specifying compression level of the result image. `1` means no compression (highest quality) and `0` the highest compression (lowest quality). |
| format(optional) | `SaveFormat` | Specifies what type of compression should be used and what is the result file extension. `SaveFormat.PNG` compression is lossless but slower, `SaveFormat.JPEG` is faster but the image has visible artifacts. Defaults to `SaveFormat.JPEG` |

Enums
-----

### `FlipType`

#### `Horizontal`

`FlipType.Horizontal ï¼ "horizontal"`

#### `Vertical`

`FlipType.Vertical ï¼ "vertical"`

### `SaveFormat`

#### `JPEG`

`SaveFormat.JPEG ï¼ "jpeg"`

#### `PNG`

`SaveFormat.PNG ï¼ "png"`

#### `WEBP`

`SaveFormat.WEBP ï¼ "webp"`

[Previous (Expo SDK)

Image](/versions/v53.0.0/sdk/image)[Next (Expo SDK)

ImagePicker](/versions/v53.0.0/sdk/imagepicker)

Was this doc helpful?

* Share your feedback
* [Ask a question on the forums about ImageManipulator](https://chat.expo.dev/)
* [View open bug reports for ImageManipulator](https://github.com/expo/expo/labels/ImageManipulator)
* [Edit this page](https://github.com/expo/expo/edit/main/docs/pages/versions/v53.0.0/sdk/imagemanipulator.mdx)

Sign up for the Expo Newsletter

Sign Up

Unsubscribe at any time. Read our [privacy policy](https://expo.dev/privacy).

On this page

[Installation](/versions/v53.0.0/sdk/imagemanipulator/#installation)[Usage](/versions/v53.0.0/sdk/imagemanipulator/#usage)[API](/versions/v53.0.0/sdk/imagemanipulator/#api)[Constants](/versions/v53.0.0/sdk/imagemanipulator/#constants)[`ImageManipulator`](/versions/v53.0.0/sdk/imagemanipulator/#imagemanipulatorimagemanipulator)[Hooks](/versions/v53.0.0/sdk/imagemanipulator/#hooks)[`useImageManipulator()`](/versions/v53.0.0/sdk/imagemanipulator/#useimagemanipulatorsource)[Classes](/versions/v53.0.0/sdk/imagemanipulator/#classes)[`ImageManipulator`](/versions/v53.0.0/sdk/imagemanipulator/#imagemanipulator)[`manipulate()`](/versions/v53.0.0/sdk/imagemanipulator/#manipulatesource)[`ImageManipulatorContext`](/versions/v53.0.0/sdk/imagemanipulator/#imagemanipulatorcontext)[`crop()`](/versions/v53.0.0/sdk/imagemanipulator/#croprect)[`extent()`](/versions/v53.0.0/sdk/imagemanipulator/#extentoptions)[`flip()`](/versions/v53.0.0/sdk/imagemanipulator/#flipfliptype)[`renderAsync()`](/versions/v53.0.0/sdk/imagemanipulator/#renderasync)[`reset()`](/versions/v53.0.0/sdk/imagemanipulator/#reset)[`resize()`](/versions/v53.0.0/sdk/imagemanipulator/#resizesize)[`rotate()`](/versions/v53.0.0/sdk/imagemanipulator/#rotatedegrees)[`ImageRef`](/versions/v53.0.0/sdk/imagemanipulator/#imageref)[`height`](/versions/v53.0.0/sdk/imagemanipulator/#height)[`nativeRefType`](/versions/v53.0.0/sdk/imagemanipulator/#nativereftype)[`width`](/versions/v53.0.0/sdk/imagemanipulator/#width)[`saveAsync()`](/versions/v53.0.0/sdk/imagemanipulator/#saveasyncoptions)[Methods](/versions/v53.0.0/sdk/imagemanipulator/#methods)[`manipulateAsync()`](/versions/v53.0.0/sdk/imagemanipulator/#imagemanipulatormanipulateasyncuri-actions-saveoptions)[Types](/versions/v53.0.0/sdk/imagemanipulator/#types)[`Action`](/versions/v53.0.0/sdk/imagemanipulator/#action)[`ActionCrop`](/versions/v53.0.0/sdk/imagemanipulator/#actioncrop)[`ActionExtent`](/versions/v53.0.0/sdk/imagemanipulator/#actionextent)[`ActionFlip`](/versions/v53.0.0/sdk/imagemanipulator/#actionflip)[`ActionResize`](/versions/v53.0.0/sdk/imagemanipulator/#actionresize)[`ActionRotate`](/versions/v53.0.0/sdk/imagemanipulator/#actionrotate)[`ImageResult`](/versions/v53.0.0/sdk/imagemanipulator/#imageresult)[`SaveOptions`](/versions/v53.0.0/sdk/imagemanipulator/#saveoptions)[Enums](/versions/v53.0.0/sdk/imagemanipulator/#enums)[`FlipType`](/versions/v53.0.0/sdk/imagemanipulator/#fliptype)[`SaveFormat`](/versions/v53.0.0/sdk/imagemanipulator/#saveformat)