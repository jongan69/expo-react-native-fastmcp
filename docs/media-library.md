MediaLibrary - Expo Documentation

[Docs](/)

[Blog](https://expo.dev/blog)[Changelog](https://expo.dev/changelog)[Star Us on GitHub](https://github.com/expo/expo)

Search

[Home](/)[Guides](/guides/overview)[EAS](/eas)[Reference](/versions/latest)[Learn](/tutorial/overview)

Reference version

Configuration files

[app.json / app.config.js](/versions/v52.0.0/config/app)[babel.config.js

NEW](/versions/v52.0.0/config/babel)[metro.config.js](/versions/v52.0.0/config/metro)[package.json

NEW](/versions/v52.0.0/config/package-json)

Expo SDK

[Expo

NEW](/versions/v52.0.0/sdk/expo)[Accelerometer](/versions/v52.0.0/sdk/accelerometer)[AppleAuthentication](/versions/v52.0.0/sdk/apple-authentication)[Application](/versions/v52.0.0/sdk/application)[Asset](/versions/v52.0.0/sdk/asset)[AsyncStorage](/versions/v52.0.0/sdk/async-storage)[Audio (expo-audio)

NEW](/versions/v52.0.0/sdk/audio)[Audio (expo-av)](/versions/v52.0.0/sdk/audio-av)[AuthSession](/versions/v52.0.0/sdk/auth-session)[AV](/versions/v52.0.0/sdk/av)[BackgroundFetch](/versions/v52.0.0/sdk/background-fetch)[BackgroundTask

NEW](/versions/v52.0.0/sdk/background-task)[Barometer](/versions/v52.0.0/sdk/barometer)[Battery](/versions/v52.0.0/sdk/battery)[BlurView](/versions/v52.0.0/sdk/blur-view)[Brightness](/versions/v52.0.0/sdk/brightness)[BuildProperties](/versions/v52.0.0/sdk/build-properties)[Calendar](/versions/v52.0.0/sdk/calendar)[Camera](/versions/v52.0.0/sdk/camera)[captureRef](/versions/v52.0.0/sdk/captureRef)[Cellular](/versions/v52.0.0/sdk/cellular)[Checkbox](/versions/v52.0.0/sdk/checkbox)[Clipboard](/versions/v52.0.0/sdk/clipboard)[Constants](/versions/v52.0.0/sdk/constants)[Contacts](/versions/v52.0.0/sdk/contacts)[Crypto](/versions/v52.0.0/sdk/crypto)[DateTimePicker](/versions/v52.0.0/sdk/date-time-picker)[DevClient](/versions/v52.0.0/sdk/dev-client)[Device](/versions/v52.0.0/sdk/device)[DeviceMotion](/versions/v52.0.0/sdk/devicemotion)[DocumentPicker](/versions/v52.0.0/sdk/document-picker)[Encoding](/versions/v52.0.0/sdk/encoding)[FaceDetector](/versions/v52.0.0/sdk/facedetector)[FileSystem](/versions/v52.0.0/sdk/filesystem)[FileSystem (next)

NEW](/versions/v52.0.0/sdk/filesystem-next)[Fingerprint

NEW](/versions/v52.0.0/sdk/fingerprint)[FlashList](/versions/v52.0.0/sdk/flash-list)[Font](/versions/v52.0.0/sdk/font)[GestureHandler](/versions/v52.0.0/sdk/gesture-handler)[GLView](/versions/v52.0.0/sdk/gl-view)[Gyroscope](/versions/v52.0.0/sdk/gyroscope)[Haptics](/versions/v52.0.0/sdk/haptics)[Image](/versions/v52.0.0/sdk/image)[ImageManipulator](/versions/v52.0.0/sdk/imagemanipulator)[ImagePicker](/versions/v52.0.0/sdk/imagepicker)[IntentLauncher](/versions/v52.0.0/sdk/intent-launcher)[KeepAwake](/versions/v52.0.0/sdk/keep-awake)[LightSensor](/versions/v52.0.0/sdk/light-sensor)[LinearGradient](/versions/v52.0.0/sdk/linear-gradient)[Linking](/versions/v52.0.0/sdk/linking)[LivePhoto

NEW](/versions/v52.0.0/sdk/live-photo)[LocalAuthentication](/versions/v52.0.0/sdk/local-authentication)[Localization](/versions/v52.0.0/sdk/localization)[Location](/versions/v52.0.0/sdk/location)[Lottie](/versions/v52.0.0/sdk/lottie)[Magnetometer](/versions/v52.0.0/sdk/magnetometer)[MailComposer](/versions/v52.0.0/sdk/mail-composer)[Manifests](/versions/v52.0.0/sdk/manifests)[Maps

ALPHA](/versions/v52.0.0/sdk/maps)[MapView (react-native-maps)](/versions/v52.0.0/sdk/map-view)[MaskedView](/versions/v52.0.0/sdk/masked-view)[MediaLibrary](/versions/v52.0.0/sdk/media-library)[NavigationBar](/versions/v52.0.0/sdk/navigation-bar)[NetInfo](/versions/v52.0.0/sdk/netinfo)[Network](/versions/v52.0.0/sdk/network)[Notifications](/versions/v52.0.0/sdk/notifications)[Pedometer](/versions/v52.0.0/sdk/pedometer)[Picker](/versions/v52.0.0/sdk/picker)[Print](/versions/v52.0.0/sdk/print)[Reanimated](/versions/v52.0.0/sdk/reanimated)[registerRootComponent](/versions/v52.0.0/sdk/register-root-component)[Router

NEW](/versions/v52.0.0/sdk/router)[Router UI

NEW](/versions/v52.0.0/sdk/router-ui)[SafeAreaContext](/versions/v52.0.0/sdk/safe-area-context)[ScreenCapture](/versions/v52.0.0/sdk/screen-capture)[ScreenOrientation](/versions/v52.0.0/sdk/screen-orientation)[Screens](/versions/v52.0.0/sdk/screens)[SecureStore](/versions/v52.0.0/sdk/securestore)[SegmentedControl](/versions/v52.0.0/sdk/segmented-control)[Sensors](/versions/v52.0.0/sdk/sensors)[Sharing](/versions/v52.0.0/sdk/sharing)[Skia](/versions/v52.0.0/sdk/skia)[Slider](/versions/v52.0.0/sdk/slider)[SMS](/versions/v52.0.0/sdk/sms)[Speech](/versions/v52.0.0/sdk/speech)[SplashScreen](/versions/v52.0.0/sdk/splash-screen)[SQLite](/versions/v52.0.0/sdk/sqlite)[StatusBar](/versions/v52.0.0/sdk/status-bar)[StoreReview](/versions/v52.0.0/sdk/storereview)[Stripe](/versions/v52.0.0/sdk/stripe)[Svg](/versions/v52.0.0/sdk/svg)[Symbols](/versions/v52.0.0/sdk/symbols)[SystemUI](/versions/v52.0.0/sdk/system-ui)[TaskManager](/versions/v52.0.0/sdk/task-manager)[TrackingTransparency](/versions/v52.0.0/sdk/tracking-transparency)[Updates](/versions/v52.0.0/sdk/updates)[URL](/versions/v52.0.0/sdk/url)[Video (expo-av)](/versions/v52.0.0/sdk/video-av)[Video (expo-video)

NEW](/versions/v52.0.0/sdk/video)[VideoThumbnails](/versions/v52.0.0/sdk/video-thumbnails)[ViewPager](/versions/v52.0.0/sdk/view-pager)[WebBrowser](/versions/v52.0.0/sdk/webbrowser)[WebView](/versions/v52.0.0/sdk/webview)

Technical specs

[Expo Updates v1](/technical-specs/expo-updates-1)[Expo Structured Field Values](/technical-specs/expo-sfv-0)

More

[Expo CLI](/more/expo-cli)[create-expo-app](/more/create-expo)[qr.expo.dev](/more/qr-codes)[Glossary of terms](/more/glossary-of-terms)

React Native

[Visit documentation](https://reactnative.dev/docs/components-and-apis)

[Archive](/archive)[Expo Snack](https://snack.expo.dev)[Discord and Forums](https://chat.expo.dev)[Newsletter](https://expo.dev/mailing-list/signup)

Expo MediaLibrary iconExpo MediaLibrary
=======================================

[GitHub](https://github.com/expo/expo/tree/sdk-52/packages/expo-media-library)[npm](https://www.npmjs.com/package/expo-media-library)

A library that provides access to the device's media library.

[GitHub](https://github.com/expo/expo/tree/sdk-52/packages/expo-media-library)[npm](https://www.npmjs.com/package/expo-media-library)

Android

iOS

Bundled version:

~17.0.6

---

`expo-media-library` provides access to the user's media library, allowing them to access their existing images and videos from your app, as well as save new ones. You can also subscribe to any updates made to the user's media library.

> Android allows full access to the media library (which is the purpose of this package) only for applications needing broad access to photos. See [Details on Google Play's Photo and Video Permissions policy](https://support.google.com/googleplay/android-developer/answer/14115180).

Installation
------------

Terminal

Copy

`-Â``npx expo install expo-media-library`

If you are installing this in an [existing React Native app](/bare/overview), make sure to [install `expo`](/bare/installing-expo-modules) in your project.

Configuration in app config
---------------------------

You can configure `expo-media-library` using its built-in [config plugin](/config-plugins/introduction) if you use config plugins in your project ([EAS Build](/build/introduction) or `npx expo run:[android|ios]`). The plugin allows you to configure various properties that cannot be set at runtime and require building a new app binary to take effect.

### Example app.json with config plugin

```
{
  "expo": {
    "plugins": [
      [
        "expo-media-library",
        {
          "photosPermission": "Allow $(PRODUCT_NAME) to access your photos.",
          "savePhotosPermission": "Allow $(PRODUCT_NAME) to save photos.",
          "isAccessMediaLocationEnabled": true
        }
      ]
    ]
  }
}

```

### Configurable properties

| Name | Default | Description |
| --- | --- | --- |
| `photosPermission` | `"Allow $(PRODUCT_NAME) to access your photos."` | Only for:â iOS  Sets the iOS `NSPhotoLibraryUsageDescription` permission message in Info.plist. |
| `savePhotosPermission` | `"Allow $(PRODUCT_NAME) to save photos."` | Only for:â iOS  Sets the iOS `NSPhotoLibraryAddUsageDescription` permission message in Info.plist. |
| `isAccessMediaLocationEnabled` | `false` | Only for:â Android  Sets whether or not to request the `ACCESS_MEDIA_LOCATION` permission on Android. |

Are you using this library in an existing React Native app?

If you're not using Continuous Native Generation ([CNG](/workflow/continuous-native-generation)) or you're using native android ios projects manually, then you need to add following permissions and configuration to your native projects:

Android

* To access asset location (latitude and longitude EXIF tags), add `ACCESS_MEDIA_LOCATION` permission to your project's android/app/src/main/AndroidManifest.xml:

  ```
  <uses-permission android:name="android.permission.ACCESS_MEDIA_LOCATION" />

  ```
* [Scoped storage](https://developer.android.com/training/data-storage#scoped-storage) is available from Android 10. To make `expo-media-library` work with scoped storage, you need to add the following configuration to your android/app/src/main/AndroidManifest.xml:

  ```
  <manifest ... >
    <application android:requestLegacyExternalStorage="true" ...>
  </manifest>

  ```

iOS

* Add `NSPhotoLibraryUsageDescription`, and `NSPhotoLibraryAddUsageDescription` keys to your project's ios/[app]/Info.plist:

  ```
  <key>NSPhotoLibraryUsageDescription</key>
  <string>Give $(PRODUCT_NAME) permission to access your photos</string>
  <key>NSPhotoLibraryAddUsageDescription</key>
  <string>Give $(PRODUCT_NAME) permission to save photos</string>

  ```

Usage
-----

Fetching albums and displaying assets

Copy

Open in Snack

```
import { useState, useEffect } from 'react';
import { Button, Text, SafeAreaView, ScrollView, StyleSheet, Image, View, Platform } from 'react-native';
import * as MediaLibrary from 'expo-media-library';

export default function App() {
  const [albums, setAlbums] = useState(null);
  const [permissionResponse, requestPermission] = MediaLibrary.usePermissions();

  async function getAlbums() {
    if (permissionResponse.status !== 'granted') {
      await requestPermission();
    }
    const fetchedAlbums = await MediaLibrary.getAlbumsAsync({
      includeSmartAlbums: true,
    });
    setAlbums(fetchedAlbums);
  }

  return (
    <SafeAreaView style={styles.container}>
      <Button onPress={getAlbums} title="Get albums" />
      <ScrollView>
        {albums && albums.map((album) => <AlbumEntry album={album} />)}
      </ScrollView>
    </SafeAreaView>
  );
}

function AlbumEntry({ album }) {
  const [assets, setAssets] = useState([]);

  useEffect(() => {
    async function getAlbumAssets() {
      const albumAssets = await MediaLibrary.getAssetsAsync({ album });
      setAssets(albumAssets.assets);
    }
    getAlbumAssets();
  }, [album]);

  return (
    <View key={album.id} style={styles.albumContainer}>
      <Text>
        {album.title} - {album.assetCount ?? 'no'} assets
      </Text>
      <View style={styles.albumAssetsContainer}>
        {assets && assets.map((asset) => (
          <Image source={{ uri: asset.uri }} width={50} height={50} />
        ))}
      </View>
    </View>
  );
}

%%placeholder-start%%const styles = StyleSheet.create({ ... }); %%placeholder-end%%const styles = StyleSheet.create({
  container: {
    flex: 1,
    gap: 8,
    justifyContent: 'center',
    ...Platform.select({
      android: {
        paddingTop: 40,
      },
    }),
  },
  albumContainer: {
    paddingHorizontal: 20,
    marginBottom: 12,
    gap: 4,
  },
  albumAssetsContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
  },
});

```

API
---

```
import * as MediaLibrary from 'expo-media-library';

```

Component
---------

### `getAlbumsAsync`

Android

iOS

Type: `React.Element<AlbumsOptions>`

Queries for user-created albums in media gallery.

Constants
---------

### `MediaLibrary.MediaType`

Android

iOS

Type: `MediaTypeObject`

Possible media types.

### `MediaLibrary.SortBy`

Android

iOS

Type: `SortByObject`

Supported keys that can be used to sort `getAssetsAsync` results.

Hooks
-----

### `usePermissions(options)`

Android

iOS

| Parameter | Type |
| --- | --- |
| options(optional) | `PermissionHookOptions<{  granularPermissions: GranularPermission[],   writeOnly: boolean }>` |

  

Check or request permissions to access the media library.
This uses both `requestPermissionsAsync` and `getPermissionsAsync` to interact with the permissions.

Returns:

`[null | PermissionResponse, RequestPermissionMethod<PermissionResponse>, GetPermissionMethod<PermissionResponse>]`

Example

```
const [permissionResponse, requestPermission] = MediaLibrary.usePermissions();

```

Methods
-------

### `MediaLibrary.addAssetsToAlbumAsync(assets, album, copy)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| assets | `AssetRef | AssetRef[]` | An array of [Asset](#asset) or their IDs. |
| album | `AlbumRef` | An [Album](#album) or its ID. |
| copy(optional) | `boolean` | Android only. Whether to copy assets to the new album instead of move them. Defaults to `true`.  Default:`true` |

  

Adds array of assets to the album.

On Android, by default it copies assets from the current album to provided one, however it's also
possible to move them by passing `false` as `copyAssets` argument. In case they're copied you
should keep in mind that `getAssetsAsync` will return duplicated assets.

Returns:

`Promise<boolean>`

Returns promise which fulfils with `true` if the assets were successfully added to
the album.

### `MediaLibrary.albumNeedsMigrationAsync(album)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| album | `AlbumRef` | An [Album](#album) or its ID. |

  

Checks if the album should be migrated to a different location. In other words, it checks if the
application has the write permission to the album folder. If not, it returns `true`, otherwise `false`.

> Note: For Android below R, web or iOS, this function always returns `false`.

Returns:

`Promise<boolean>`

Returns a promise which fulfils with `true` if the album should be migrated.

### `MediaLibrary.createAlbumAsync(albumName, asset, copyAsset)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| albumName | `string` | Name of the album to create. |
| asset(optional) | `AssetRef` | An [Asset](#asset) or its ID (required on Android). |
| copyAsset(optional) | `boolean` | Android Only. Whether to copy asset to the new album instead of move it. Defaults to `true`.  Default:`true` |

  

Creates an album with given name and initial asset. The asset parameter is required on Android,
since it's not possible to create empty album on this platform. On Android, by default it copies
given asset from the current album to the new one, however it's also possible to move it by
passing `false` as `copyAsset` argument.
In case it's copied you should keep in mind that `getAssetsAsync` will return duplicated asset.

Returns:

`Promise<Album>`

Newly created [`Album`](#album).

### `MediaLibrary.createAssetAsync(localUri)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| localUri | `string` | A URI to the image or video file. It must contain an extension. On Android it must be a local path, so it must start with `file:///` |

  

Creates an asset from existing file. The most common use case is to save a picture taken by [Camera](/versions/v52.0.0/sdk/camera).
This method requires `CAMERA_ROLL` permission.

Returns:

`Promise<Asset>`

A promise which fulfils with an object representing an [`Asset`](#asset).

Example

```
const { uri } = await Camera.takePictureAsync();
const asset = await MediaLibrary.createAssetAsync(uri);

```

### `MediaLibrary.deleteAlbumsAsync(albums, assetRemove)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| albums | `AlbumRef | AlbumRef[]` | An array of [`Album`](#asset)s or their IDs. |
| assetRemove(optional) | `boolean` | iOS Only. Whether to also delete assets belonging to given albums. Defaults to `false`.  Default:`false` |

  

Deletes given albums from the library. On Android by default it deletes assets belonging to given
albums from the library. On iOS it doesn't delete these assets, however it's possible to do by
passing `true` as `deleteAssets`.

Returns:

`Promise<boolean>`

Returns a promise which fulfils with `true` if the albums were successfully deleted from
the library.

### `MediaLibrary.deleteAssetsAsync(assets)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| assets | `AssetRef | AssetRef[]` | An array of [Asset](#asset) or their IDs. |

  

Deletes assets from the library. On iOS it deletes assets from all albums they belong to, while
on Android it keeps all copies of them (album is strictly connected to the asset). Also, there is
additional dialog on iOS that requires user to confirm this action.

Returns:

`Promise<boolean>`

Returns promise which fulfils with `true` if the assets were successfully deleted.

### `MediaLibrary.getAlbumAsync(title)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| title | `string` | Name of the album to look for. |

  

Queries for an album with a specific name.

Returns:

`Promise<Album>`

An object representing an [`Album`](#album), if album with given name exists, otherwise
returns `null`.

### `MediaLibrary.getAssetInfoAsync(asset, options)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| asset | `AssetRef` | An [Asset](#asset) or its ID. |
| options(optional) | `MediaLibraryAssetInfoQueryOptions` | - |

  

Provides more information about an asset, including GPS location, local URI and EXIF metadata.

Returns:

`Promise<AssetInfo>`

An [AssetInfo](#assetinfo) object, which is an `Asset` extended by an additional fields.

### `MediaLibrary.getAssetsAsync(assetsOptions)`

Android

iOS

| Parameter | Type |
| --- | --- |
| assetsOptions(optional) | `AssetsOptions` |

  

Fetches a page of assets matching the provided criteria.

Returns:

`Promise<PagedInfo<Asset>>`

A promise that fulfils with to [`PagedInfo`](#pagedinfo) object with array of [`Asset`](#asset)s.

### `MediaLibrary.getMomentsAsync()`

iOS

Fetches a list of moments, which is a group of assets taken around the same place
and time.

Returns:

`Promise<any>`

An array of [albums](#album) whose type is `moment`.

### `MediaLibrary.getPermissionsAsync(writeOnly, granularPermissions)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| writeOnly(optional) | `boolean` | - |
| granularPermissions(optional) | `GranularPermission[]` | A list of [`GranularPermission`](#granularpermission) values. This parameter has an effect only on Android 13 and newer. By default, `expo-media-library` will ask for all possible permissions. |

  

Checks user's permissions for accessing media library.

Returns:

`Promise<PermissionResponse>`

A promise that fulfils with [`PermissionResponse`](#permissionresponse) object.

### `MediaLibrary.isAvailableAsync()`

Android

iOS

Returns whether the Media Library API is enabled on the current device.

Returns:

`Promise<boolean>`

A promise which fulfils with a `boolean`, indicating whether the Media Library API is
available on the current device.

### `MediaLibrary.migrateAlbumIfNeededAsync(album)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| album | `AlbumRef` | An [Album](#album) or its ID. |

  

Moves album content to the special media directories on Android R or above if needed.
Those new locations are in line with the Android `scoped storage` - so your application won't
lose write permission to those directories in the future.

This method does nothing if:

* app is running on iOS, web or Android below R
* app has write permission to the album folder

The migration is possible when the album contains only compatible files types.
For instance, movies and pictures are compatible with each other, but music and pictures are not.
If automatic migration isn't possible, the function rejects.
In that case, you can use methods from the `expo-file-system` to migrate all your files manually.

#### Why do you need to migrate files?

Android R introduced a lot of changes in the storage system. Now applications can't save
anything to the root directory. The only available locations are from the `MediaStore` API.
Unfortunately, the media library stored albums in folders for which, because of those changes,
the application doesn't have permissions anymore. However, it doesn't mean you need to migrate
all your albums. If your application doesn't add assets to albums, you don't have to migrate.
Everything will work as it used to. You can read more about scoped storage in [the Android documentation](https://developer.android.com/about/versions/11/privacy/storage).

Returns:

`Promise<void>`

A promise which fulfils to `void`.

### `MediaLibrary.presentPermissionsPickerAsync(mediaTypes)`

Android 14+

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| mediaTypes(optional) | `MediaTypeFilter[]` | Limits the type(s) of media that the user will be granting access to. By default, a list that shows both photos and videos is presented. |

  

Allows the user to update the assets that your app has access to.
The system modal is only displayed if the user originally allowed only `limited` access to their
media library, otherwise this method is a no-op.

Returns:

`Promise<void>`

A promise that either rejects if the method is unavailable, or resolves to `void`.

> Note: This method doesn't inform you if the user changes which assets your app has access to.
> That information is only exposed by iOS, and to obtain it, you need to subscribe for updates to the user's media library using [`addListener()`](#medialibraryaddlistenerlistener).
> If `hasIncrementalChanges` is `false`, the user changed their permissions.

### `MediaLibrary.removeAssetsFromAlbumAsync(assets, album)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| assets | `AssetRef | AssetRef[]` | An array of [Asset](#asset) or their IDs. |
| album | `AlbumRef` | An [Album](#album) or its ID. |

  

Removes given assets from album.

On Android, album will be automatically deleted if there are no more assets inside.

Returns:

`Promise<boolean>`

Returns promise which fulfils with `true` if the assets were successfully removed from
the album.

### `MediaLibrary.removeSubscription(subscription)`

Android

iOS

| Parameter | Type |
| --- | --- |
| subscription | `EventSubscription` |

  

Returns:

`void`

### `MediaLibrary.requestPermissionsAsync(writeOnly, granularPermissions)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| writeOnly(optional) | `boolean` | - |
| granularPermissions(optional) | `GranularPermission[]` | A list of [`GranularPermission`](#granularpermission) values. This parameter has an effect only on Android 13 and newer. By default, `expo-media-library` will ask for all possible permissions. |

  

Asks the user to grant permissions for accessing media in user's media library.

Returns:

`Promise<PermissionResponse>`

A promise that fulfils with [`PermissionResponse`](#permissionresponse) object.

### `MediaLibrary.saveToLibraryAsync(localUri)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| localUri | `string` | A URI to the image or video file. It must contain an extension. On Android it must be a local path, so it must start with `file:///`. |

  

Saves the file at given `localUri` to the user's media library. Unlike [`createAssetAsync()`](#medialibrarycreateassetasynclocaluri),
This method doesn't return created asset.
On iOS 11+, it's possible to use this method without asking for `CAMERA_ROLL` permission,
however then yours `Info.plist` should have `NSPhotoLibraryAddUsageDescription` key.

Returns:

`Promise<void>`

Event Subscriptions
-------------------

### `MediaLibrary.addListener(listener)`

Android

iOS

| Parameter | Type | Description |
| --- | --- | --- |
| listener | `(event: MediaLibraryAssetsChangeEvent) => void` | A callback that is fired when any assets have been inserted or deleted from the library. On Android it's invoked with an empty object. On iOS, it's invoked with [`MediaLibraryAssetsChangeEvent`](#medialibraryassetschangeevent) object.  Additionally, only on iOS, the listener is also invoked when the user changes access to individual assets in the media library using `presentPermissionsPickerAsync()`. |

  

Subscribes for updates in user's media library.

Returns:

`EventSubscription`

An [`Subscription`](#subscription) object that you can call `remove()` on when you would
like to unsubscribe the listener.

### `MediaLibrary.removeAllListeners()`

Android

iOS

Removes all listeners.

Returns:

`void`

Interfaces
----------

### `EXPermissionResponse`

Android

iOS

An object obtained by permissions get and request functions.

| Property | Type | Description |
| --- | --- | --- |
| canAskAgain | `boolean` | Indicates if user can be asked again for specific permission. If not, one should be directed to the Settings app in order to enable/disable the permission. |
| expires | `PermissionExpiration` | Determines time when the permission expires. |
| granted | `boolean` | A convenience boolean that indicates if the permission is granted. |
| status | `PermissionStatus` | Determines the status of the permission. |

Types
-----

### `Album`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| approximateLocation(optional) | `Location` | Only for:â iOS  Apply only to albums whose type is `'moment'`. Approximated location of all assets in the moment. |
| assetCount | `number` | Estimated number of assets in the album. |
| endTime | `number` | Only for:â iOS  Apply only to albums whose type is `'moment'`. Latest creation timestamp of all assets in the moment. |
| id | `string` | Album ID. |
| locationNames(optional) | `string[]` | Only for:â iOS  Apply only to albums whose type is `'moment'`. Names of locations grouped in the moment. |
| startTime | `number` | Only for:â iOS  Apply only to albums whose type is `'moment'`. Earliest creation timestamp of all assets in the moment. |
| title | `string` | Album title. |
| type(optional) | `AlbumType` | Only for:â iOS  The type of the assets album. |

### `AlbumRef`

Android

iOS

Literal Type: `union`

Acceptable values are: `Album` | `string`

### `AlbumsOptions`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| includeSmartAlbums(optional) | `boolean` | - |

### `AlbumType`

Android

iOS

Literal Type: `string`

Acceptable values are: `'album'` | `'moment'` | `'smartAlbum'`

### `Asset`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| albumId(optional) | `string` | Only for:â Android  Album ID that the asset belongs to. |
| creationTime | `number` | File creation timestamp. |
| duration | `number` | Duration of the video or audio asset in seconds. |
| filename | `string` | Filename of the asset. |
| height | `number` | Height of the image or video. |
| id | `string` | Internal ID that represents an asset. |
| mediaSubtypes(optional) | `MediaSubtype[]` | Only for:â iOS  An array of media subtypes. |
| mediaType | `MediaTypeValue` | Media type. |
| modificationTime | `number` | Last modification timestamp. |
| uri | `string` | URI that points to the asset. `ph://*` (iOS), `file://*` (Android) |
| width | `number` | Width of the image or video. |

### `AssetInfo`

Android

iOS

Type: `Asset` extended by:

| Property | Type | Description |
| --- | --- | --- |
| exif(optional) | `object` | EXIF metadata associated with the image. |
| isFavorite(optional) | `boolean` | Only for:â iOS  Whether the asset is marked as favorite. |
| isNetworkAsset(optional) | `boolean` | Only for:â iOS  This field is available only if flag `shouldDownloadFromNetwork` is set to `false`. Whether the asset is stored on the network (iCloud on iOS). |
| localUri(optional) | `string` | Local URI for the asset. |
| location(optional) | `Location` | GPS location if available. |
| orientation(optional) | `number` | Only for:â iOS  Display orientation of the image. Orientation is available only for assets whose `mediaType` is `MediaType.photo`. Value will range from 1 to 8, see [EXIF orientation specification](http://sylvana.net/jpegcrop/exif_orientation.html) for more details. |

### `AssetRef`

Android

iOS

Literal Type: `union`

Acceptable values are: `Asset` | `string`

### `AssetsOptions`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| after(optional) | `AssetRef` | Asset ID of the last item returned on the previous page. To get the ID of the next page, pass [`endCursor`](#pagedinfo) as its value. |
| album(optional) | `AlbumRef` | [Album](#album) or its ID to get assets from specific album. |
| createdAfter(optional) | `Date | number` | `Date` object or Unix timestamp in milliseconds limiting returned assets only to those that were created after this date. |
| createdBefore(optional) | `Date | number` | Similarly as `createdAfter`, but limits assets only to those that were created before specified date. |
| first(optional) | `number` | The maximum number of items on a single page.  Default:`20` |
| mediaType(optional) | `MediaTypeValue[] | MediaTypeValue` | An array of [MediaTypeValue](#mediatypevalue)s or a single `MediaTypeValue`.  Default:`MediaType.photo` |
| sortBy(optional) | `SortByValue[] | SortByValue` | An array of [`SortByValue`](#sortbyvalue)s or a single `SortByValue` value. By default, all keys are sorted in descending order, however you can also pass a pair `[key, ascending]` where the second item is a `boolean` value that means whether to use ascending order. Note that if the `SortBy.default` key is used, then `ascending` argument will not matter. Earlier items have higher priority when sorting out the results. If empty, this method uses the default sorting that is provided by the platform. |

### `GranularPermission`

Android 13+

Literal Type: `string`

Determines the type of media that the app will ask the OS to get access to.

Acceptable values are: `'audio'` | `'photo'` | `'video'`

### `Location`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| latitude | `number` | - |
| longitude | `number` | - |

### `MediaLibraryAssetInfoQueryOptions`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| shouldDownloadFromNetwork(optional) | `boolean` | Whether allow the asset to be downloaded from network. Only available in iOS with iCloud assets.  Default:`true` |

### `MediaLibraryAssetsChangeEvent`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| deletedAssets(optional) | `Asset[]` | Available only if `hasIncrementalChanges` is `true`. Array of [`Asset`](#asset)s that have been deleted from the library. |
| hasIncrementalChanges | `boolean` | Whether the media library's changes could be described as "incremental changes". `true` indicates the changes are described by the `insertedAssets`, `deletedAssets` and `updatedAssets` values. `false` indicates that the scope of changes is too large and you should perform a full assets reload (eg. a user has changed access to individual assets in the media library). |
| insertedAssets(optional) | `Asset[]` | Available only if `hasIncrementalChanges` is `true`. Array of [`Asset`](#asset)s that have been inserted to the library. |
| updatedAssets(optional) | `Asset[]` | Available only if `hasIncrementalChanges` is `true`. Array of [`Asset`](#asset)s that have been updated or completed downloading from network storage (iCloud on iOS). |

### `MediaSubtype`

Android

iOS

Literal Type: `string`

Constants identifying specific variations of asset media, such as panorama or screenshot photos,
and time-lapse or high-frame-rate video. Maps to [these values](https://developer.apple.com/documentation/photokit/phassetmediasubtype#1603888).

Acceptable values are: `'depthEffect'` | `'hdr'` | `'highFrameRate'` | `'livePhoto'` | `'panorama'` | `'screenshot'` | `'stream'` | `'timelapse'`

### `MediaTypeFilter`

Android 14+

Literal Type: `string`

Represents the possible types of media that the app will ask the OS to get access to when calling [`presentPermissionsPickerAsync()`](#medialibrarypresentpermissionspickerasyncmediatypes).

Acceptable values are: `'photo'` | `'video'`

### `MediaTypeObject`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| audio | `'audio'` | - |
| photo | `'photo'` | - |
| unknown | `'unknown'` | - |
| video | `'video'` | - |

### `MediaTypeValue`

Android

iOS

Literal Type: `string`

Acceptable values are: `'audio'` | `'photo'` | `'video'` | `'unknown'`

### `PagedInfo`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| assets | `T[]` | A page of [`Asset`](#asset)s fetched by the query. |
| endCursor | `string` | ID of the last fetched asset. It should be passed as `after` option in order to get the next page. |
| hasNextPage | `boolean` | Whether there are more assets to fetch. |
| totalCount | `number` | Estimated total number of assets that match the query. |

### `PermissionExpiration`

Android

iOS

Literal Type: `union`

Permission expiration time. Currently, all permissions are granted permanently.

Acceptable values are: `'never'` | `number`

### `PermissionHookOptions`

Android

iOS

Literal Type: `union`

Acceptable values are: `PermissionHookBehavior` | `Options`

### `PermissionResponse`

Android

iOS

Type: `EXPermissionResponse` extended by:

| Property | Type | Description |
| --- | --- | --- |
| accessPrivileges(optional) | `'all' | 'limited' | 'none'` | Indicates if your app has access to the whole or only part of the photo library. Possible values are:   * `'all'` if the user granted your app access to the whole photo library * `'limited'` if the user granted your app access only to selected photos (only available on Android API 14+ and iOS 14.0+) * `'none'` if user denied or hasn't yet granted the permission |

### `SortByKey`

Android

iOS

Literal Type: `string`

Acceptable values are: `'default'` | `'mediaType'` | `'width'` | `'height'` | `'creationTime'` | `'modificationTime'` | `'duration'`

### `SortByObject`

Android

iOS

| Property | Type | Description |
| --- | --- | --- |
| creationTime | `'creationTime'` | - |
| default | `'default'` | - |
| duration | `'duration'` | - |
| height | `'height'` | - |
| mediaType | `'mediaType'` | - |
| modificationTime | `'modificationTime'` | - |
| width | `'width'` | - |

### `SortByValue`

Android

iOS

Literal Type: `union`

Acceptable values are: `[SortByKey, boolean]` | `SortByKey`

### `Subscription`

Android

iOS

A subscription object that allows to conveniently remove an event listener from the emitter.

| Property | Type | Description |
| --- | --- | --- |
| remove | `() => void` | Removes an event listener for which the subscription has been created. After calling this function, the listener will no longer receive any events from the emitter. |

Enums
-----

### `PermissionStatus`

Android

iOS

#### `DENIED`

`PermissionStatus.DENIED ï¼ "denied"`

User has denied the permission.

#### `GRANTED`

`PermissionStatus.GRANTED ï¼ "granted"`

User has granted the permission.

#### `UNDETERMINED`

`PermissionStatus.UNDETERMINED ï¼ "undetermined"`

User hasn't granted or denied the permission yet.

Permissions
-----------

### Android

The following permissions are added automatically through this library's AndroidManifest.xml:

| Android Permission | Description |
| --- | --- |
| `READ_EXTERNAL_STORAGE` | Allows an application to read from external storage. |
| `WRITE_EXTERNAL_STORAGE` | Allows an application to write to external storage. |
| `READ_MEDIA_IMAGES` | Allows an application to read image files from external storage. |
| `READ_MEDIA_VIDEO` | Allows an application to read video files from external storage. |
| `READ_MEDIA_AUDIO` | Allows an application to read audio files from external storage. |
| `READ_MEDIA_VISUAL_USER_SELECTED` | Allows an application to read image or video files from external storage that a user has selected via the permission prompt photo picker.  Apps can check this permission to verify that a user has decided to use the photo picker, instead of granting access to `READ_MEDIA_IMAGES` or `READ_MEDIA_VIDEO`. It does not prevent apps from accessing the standard photo picker manually. This permission should be requested alongside `READ_MEDIA_IMAGES` and/or `READ_MEDIA_VIDEO`, depending on which type of media is desired. |

### iOS

The following usage description keys are used by this library:

| Info.plist Key | Description |
| --- | --- |
| `NSPhotoLibraryUsageDescription` | A message that tells the user why the app is requesting access to the userâs photo library. |
| `NSPhotoLibraryAddUsageDescription` | A message that tells the user why the app is requesting add-only access to the userâs photo library. |

[Previous (Expo SDK)

MaskedView](/versions/v52.0.0/sdk/masked-view)[Next (Expo SDK)

NavigationBar](/versions/v52.0.0/sdk/navigation-bar)

Was this doc helpful?

* Share your feedback
* [Ask a question on the forums about MediaLibrary](https://chat.expo.dev/)
* [View open bug reports for MediaLibrary](https://github.com/expo/expo/labels/MediaLibrary)
* [Edit this page](https://github.com/expo/expo/edit/main/docs/pages/versions/v52.0.0/sdk/media-library.mdx)

Sign up for the Expo Newsletter

Sign Up

Unsubscribe at any time. Read our [privacy policy](https://expo.dev/privacy).

On this page

[Installation](/versions/v52.0.0/sdk/media-library/#installation)[Configuration in app config](/versions/v52.0.0/sdk/media-library/#configuration-in-app-config)[Example app.json with config plugin](/versions/v52.0.0/sdk/media-library/#example-appjson-with-config-plugin)[Configurable properties](/versions/v52.0.0/sdk/media-library/#configurable-properties)[Usage](/versions/v52.0.0/sdk/media-library/#usage)[API](/versions/v52.0.0/sdk/media-library/#api)[Component](/versions/v52.0.0/sdk/media-library/#component)[`getAlbumsAsync`](/versions/v52.0.0/sdk/media-library/#getalbumsasync)[Constants](/versions/v52.0.0/sdk/media-library/#constants)[`MediaType`](/versions/v52.0.0/sdk/media-library/#medialibrarymediatype)[`SortBy`](/versions/v52.0.0/sdk/media-library/#medialibrarysortby)[Hooks](/versions/v52.0.0/sdk/media-library/#hooks)[`usePermissions()`](/versions/v52.0.0/sdk/media-library/#usepermissionsoptions)[Methods](/versions/v52.0.0/sdk/media-library/#methods)[`addAssetsToAlbumAsync()`](/versions/v52.0.0/sdk/media-library/#medialibraryaddassetstoalbumasyncassets-album-copy)[`albumNeedsMigrationAsync()`](/versions/v52.0.0/sdk/media-library/#medialibraryalbumneedsmigrationasyncalbum)[`createAlbumAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarycreatealbumasyncalbumname-asset-copyasset)[`createAssetAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarycreateassetasynclocaluri)[`deleteAlbumsAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarydeletealbumsasyncalbums-assetremove)[`deleteAssetsAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarydeleteassetsasyncassets)[`getAlbumAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarygetalbumasynctitle)[`getAssetInfoAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarygetassetinfoasyncasset-options)[`getAssetsAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarygetassetsasyncassetsoptions)[`getMomentsAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarygetmomentsasync)[`getPermissionsAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarygetpermissionsasyncwriteonly-granularpermissions)[`isAvailableAsync()`](/versions/v52.0.0/sdk/media-library/#medialibraryisavailableasync)[`migrateAlbumIfNeededAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarymigratealbumifneededasyncalbum)[`presentPermissionsPickerAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarypresentpermissionspickerasyncmediatypes)[`removeAssetsFromAlbumAsync()`](/versions/v52.0.0/sdk/media-library/#medialibraryremoveassetsfromalbumasyncassets-album)[`removeSubscription()`](/versions/v52.0.0/sdk/media-library/#medialibraryremovesubscriptionsubscription)[`requestPermissionsAsync()`](/versions/v52.0.0/sdk/media-library/#medialibraryrequestpermissionsasyncwriteonly-granularpermissions)[`saveToLibraryAsync()`](/versions/v52.0.0/sdk/media-library/#medialibrarysavetolibraryasynclocaluri)[Event Subscriptions](/versions/v52.0.0/sdk/media-library/#event-subscriptions)[`addListener()`](/versions/v52.0.0/sdk/media-library/#medialibraryaddlistenerlistener)[`removeAllListeners()`](/versions/v52.0.0/sdk/media-library/#medialibraryremovealllisteners)[Interfaces](/versions/v52.0.0/sdk/media-library/#interfaces)[`EXPermissionResponse`](/versions/v52.0.0/sdk/media-library/#expermissionresponse)[Types](/versions/v52.0.0/sdk/media-library/#types)[`Album`](/versions/v52.0.0/sdk/media-library/#album)[`AlbumRef`](/versions/v52.0.0/sdk/media-library/#albumref)[`AlbumsOptions`](/versions/v52.0.0/sdk/media-library/#albumsoptions)[`AlbumType`](/versions/v52.0.0/sdk/media-library/#albumtype)[`Asset`](/versions/v52.0.0/sdk/media-library/#asset)[`AssetInfo`](/versions/v52.0.0/sdk/media-library/#assetinfo)[`AssetRef`](/versions/v52.0.0/sdk/media-library/#assetref)[`AssetsOptions`](/versions/v52.0.0/sdk/media-library/#assetsoptions)[`GranularPermission`](/versions/v52.0.0/sdk/media-library/#granularpermission)[`Location`](/versions/v52.0.0/sdk/media-library/#location)[`MediaLibraryAssetInfoQueryOptions`](/versions/v52.0.0/sdk/media-library/#medialibraryassetinfoqueryoptions)[`MediaLibraryAssetsChangeEvent`](/versions/v52.0.0/sdk/media-library/#medialibraryassetschangeevent)[`MediaSubtype`](/versions/v52.0.0/sdk/media-library/#mediasubtype)[`MediaTypeFilter`](/versions/v52.0.0/sdk/media-library/#mediatypefilter)[`MediaTypeObject`](/versions/v52.0.0/sdk/media-library/#mediatypeobject)[`MediaTypeValue`](/versions/v52.0.0/sdk/media-library/#mediatypevalue)[`PagedInfo`](/versions/v52.0.0/sdk/media-library/#pagedinfo)[`PermissionExpiration`](/versions/v52.0.0/sdk/media-library/#permissionexpiration)[`PermissionHookOptions`](/versions/v52.0.0/sdk/media-library/#permissionhookoptions)[`PermissionResponse`](/versions/v52.0.0/sdk/media-library/#permissionresponse)[`SortByKey`](/versions/v52.0.0/sdk/media-library/#sortbykey)[`SortByObject`](/versions/v52.0.0/sdk/media-library/#sortbyobject)[`SortByValue`](/versions/v52.0.0/sdk/media-library/#sortbyvalue)[`Subscription`](/versions/v52.0.0/sdk/media-library/#subscription)[Enums](/versions/v52.0.0/sdk/media-library/#enums)[`PermissionStatus`](/versions/v52.0.0/sdk/media-library/#permissionstatus)[Permissions](/versions/v52.0.0/sdk/media-library/#permissions)[Android](/versions/v52.0.0/sdk/media-library/#android)[READ\_EXTERNAL\_STORAGE](/versions/v52.0.0/sdk/media-library/#permission-read_external_storage)[WRITE\_EXTERNAL\_STORAGE](/versions/v52.0.0/sdk/media-library/#permission-write_external_storage)[READ\_MEDIA\_IMAGES](/versions/v52.0.0/sdk/media-library/#permission-read_media_images)[READ\_MEDIA\_VIDEO](/versions/v52.0.0/sdk/media-library/#permission-read_media_video)[READ\_MEDIA\_AUDIO](/versions/v52.0.0/sdk/media-library/#permission-read_media_audio)[READ\_MEDIA\_VISUAL\_USER\_SELECTED](/versions/v52.0.0/sdk/media-library/#permission-read_media_visual_user_selected)[iOS](/versions/v52.0.0/sdk/media-library/#ios)[NSPhotoLibraryUsageDescription](/versions/v52.0.0/sdk/media-library/#permission-nsphotolibraryusagedescription)[NSPhotoLibraryAddUsageDescription](/versions/v52.0.0/sdk/media-library/#permission-nsphotolibraryaddusagedescription)